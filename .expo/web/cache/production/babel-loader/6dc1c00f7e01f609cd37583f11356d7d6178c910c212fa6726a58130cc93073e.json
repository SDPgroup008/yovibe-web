{"ast":null,"code":"\"use client\";import{createContext,useState,useEffect,useContext}from\"react\";import{onAuthStateChanged}from\"firebase/auth\";import AsyncStorage from\"@react-native-async-storage/async-storage\";import{auth}from\"../config/firebase\";import FirebaseService from\"../services/FirebaseService\";import{reset,navigate}from\"../utils/navigationRef\";import{isDevelopment}from\"../utils/env\";import{jsx as _jsx}from\"react/jsx-runtime\";const AuthContext=createContext(undefined);const USER_STORAGE_KEY=\"yovibe_user_data\";export const AuthProvider=({children})=>{const[user,setUser]=useState(null);const[loading,setLoading]=useState(true);useEffect(()=>{const loadStoredUser=async()=>{try{const storedUser=await AsyncStorage.getItem(USER_STORAGE_KEY);if(storedUser){setUser(JSON.parse(storedUser));}}catch(error){console.error(\"Error loading stored user:\",error);}finally{setLoading(false);}};loadStoredUser();},[]);useEffect(()=>{console.log(\"Setting up auth state listener\");const unsubscribe=onAuthStateChanged(auth,async firebaseUser=>{setLoading(true);console.log(\"Auth state changed:\",firebaseUser?firebaseUser.email:\"No user\");if(firebaseUser){try{let userProfile;try{userProfile=await FirebaseService.getUserProfile(firebaseUser.uid);}catch(error){console.warn(\"Error fetching user profile, using mock data:\",error);userProfile={id:\"mock-id\",uid:firebaseUser.uid,email:firebaseUser.email||\"test@example.com\",userType:\"user\",createdAt:new Date(),lastLoginAt:new Date()};}setUser(userProfile);console.log(\"User profile loaded:\",userProfile.email);await AsyncStorage.setItem(USER_STORAGE_KEY,JSON.stringify(userProfile));}catch(error){console.error(\"Error in auth state change handler:\",error);setUser(null);await AsyncStorage.removeItem(USER_STORAGE_KEY);}}else{console.log(\"No user found, clearing user state\");setUser(null);await AsyncStorage.removeItem(USER_STORAGE_KEY);}setLoading(false);});return()=>{console.log(\"Cleaning up auth state listener\");unsubscribe();};},[]);const signIn=async(email,password)=>{console.log(\"Attempting to sign in:\",email);setLoading(true);try{await FirebaseService.signIn(email,password);console.log(\"Sign in successful\");if(isDevelopment()){console.log(\"Development mode: Creating mock user\");const mockUser={id:\"mock-id\",uid:\"mock-uid\",email:email,userType:\"user\",createdAt:new Date(),lastLoginAt:new Date()};setUser(mockUser);await AsyncStorage.setItem(USER_STORAGE_KEY,JSON.stringify(mockUser));}try{reset({index:0,routes:[{name:\"Main\"}]});}catch(navError){console.warn(\"Navigation error:\",navError);}}catch(error){console.error(\"Error signing in:\",error);if(isDevelopment()){console.log(\"Development mode: Creating mock user\");const mockUser={id:\"mock-id\",uid:\"mock-uid\",email:email,userType:\"user\",createdAt:new Date(),lastLoginAt:new Date()};setUser(mockUser);await AsyncStorage.setItem(USER_STORAGE_KEY,JSON.stringify(mockUser));}else{throw error;}}finally{setLoading(false);}};const signUp=async(email,password,userType)=>{console.log(\"Attempting to sign up:\",email,\"as\",userType);setLoading(true);try{await FirebaseService.signUp(email,password,userType);console.log(\"Sign up successful\");if(isDevelopment()){console.log(\"Development mode: Creating mock user\");const mockUser={id:\"mock-id\",uid:\"mock-uid\",email:email,userType:userType,createdAt:new Date(),lastLoginAt:new Date()};setUser(mockUser);await AsyncStorage.setItem(USER_STORAGE_KEY,JSON.stringify(mockUser));}try{reset({index:0,routes:[{name:\"Main\"}]});}catch(navError){console.warn(\"Navigation error:\",navError);}}catch(error){console.error(\"Error signing up:\",error);if(isDevelopment()){console.log(\"Development mode: Creating mock user\");const mockUser={id:\"mock-id\",uid:\"mock-uid\",email:email,userType:userType,createdAt:new Date(),lastLoginAt:new Date()};setUser(mockUser);await AsyncStorage.setItem(USER_STORAGE_KEY,JSON.stringify(mockUser));}else{throw error;}}finally{setLoading(false);}};const signOut=async()=>{console.log(\"Attempting to sign out\");setLoading(true);try{await FirebaseService.signOut();await AsyncStorage.removeItem(USER_STORAGE_KEY);setUser(null);console.log(\"Sign out successful\");try{reset({index:0,routes:[{name:\"Auth\"}]});}catch(navError){console.warn(\"Navigation error:\",navError);navigate(\"Auth\");}}catch(error){console.error(\"Error signing out:\",error);await AsyncStorage.removeItem(USER_STORAGE_KEY);setUser(null);try{reset({index:0,routes:[{name:\"Auth\"}]});}catch(navError){console.warn(\"Navigation error:\",navError);navigate(\"Auth\");}}finally{setLoading(false);}};const updateProfile=async data=>{if(!user){throw new Error(\"No user logged in\");}console.log(\"Updating user profile:\",data);setLoading(true);try{await FirebaseService.updateUserProfile(user.id,data);const updatedUser=Object.assign({},user,data);setUser(updatedUser);await AsyncStorage.setItem(USER_STORAGE_KEY,JSON.stringify(updatedUser));console.log(\"Profile update successful\");}catch(error){console.error(\"Error updating profile:\",error);if(isDevelopment()){const updatedUser=Object.assign({},user,data);setUser(updatedUser);await AsyncStorage.setItem(USER_STORAGE_KEY,JSON.stringify(updatedUser));}else{throw error;}}finally{setLoading(false);}};return _jsx(AuthContext.Provider,{value:{user,loading,signIn,signUp,signOut,updateProfile},children:children});};export const useAuth=()=>{const context=useContext(AuthContext);if(context===undefined){throw new Error(\"useAuth must be used within an AuthProvider\");}return context;};","map":{"version":3,"names":["createContext","useState","useEffect","useContext","onAuthStateChanged","AsyncStorage","auth","FirebaseService","reset","navigate","isDevelopment","jsx","_jsx","AuthContext","undefined","USER_STORAGE_KEY","AuthProvider","children","user","setUser","loading","setLoading","loadStoredUser","storedUser","getItem","JSON","parse","error","console","log","unsubscribe","firebaseUser","email","userProfile","getUserProfile","uid","warn","id","userType","createdAt","Date","lastLoginAt","setItem","stringify","removeItem","signIn","password","mockUser","index","routes","name","navError","signUp","signOut","updateProfile","data","Error","updateUserProfile","updatedUser","Object","assign","Provider","value","useAuth","context"],"sources":["C:/Users/user/Desktop/projects/life/Yo/yovibe-web/src/contexts/AuthContext.tsx"],"sourcesContent":["\"use client\"\n\nimport type React from \"react\"\nimport { createContext, useState, useEffect, useContext } from \"react\"\nimport { onAuthStateChanged } from \"firebase/auth\"\nimport AsyncStorage from \"@react-native-async-storage/async-storage\"\nimport { auth } from \"../config/firebase\"\nimport FirebaseService from \"../services/FirebaseService\"\nimport type { User, UserType } from \"../models/User\"\nimport { reset, navigate } from \"../utils/navigationRef\"\nimport { isDevelopment } from \"../utils/env\"\n\ninterface AuthContextType {\n  user: User | null\n  loading: boolean\n  signIn: (email: string, password: string) => Promise<void>\n  signUp: (email: string, password: string, userType: UserType) => Promise<void>\n  signOut: () => Promise<void>\n  updateProfile: (data: Partial<User>) => Promise<void>\n}\n\nconst AuthContext = createContext<AuthContextType | undefined>(undefined)\n\n// Key for storing user data in AsyncStorage\nconst USER_STORAGE_KEY = \"yovibe_user_data\"\n\nexport const AuthProvider: React.FC<{ children: React.ReactNode }> = ({ children }) => {\n  const [user, setUser] = useState<User | null>(null)\n  const [loading, setLoading] = useState(true)\n\n  // Load user from AsyncStorage on initial load\n  useEffect(() => {\n    const loadStoredUser = async () => {\n      try {\n        const storedUser = await AsyncStorage.getItem(USER_STORAGE_KEY)\n        if (storedUser) {\n          setUser(JSON.parse(storedUser))\n        }\n      } catch (error) {\n        console.error(\"Error loading stored user:\", error)\n      } finally {\n        setLoading(false)\n      }\n    }\n\n    loadStoredUser()\n  }, [])\n\n  useEffect(() => {\n    console.log(\"Setting up auth state listener\")\n    const unsubscribe = onAuthStateChanged(auth, async (firebaseUser) => {\n      setLoading(true)\n      console.log(\"Auth state changed:\", firebaseUser ? firebaseUser.email : \"No user\")\n\n      if (firebaseUser) {\n        try {\n          // For development/testing, create a mock user if Firebase is not properly configured\n          let userProfile\n          try {\n            userProfile = await FirebaseService.getUserProfile(firebaseUser.uid)\n          } catch (error) {\n            console.warn(\"Error fetching user profile, using mock data:\", error)\n            // Create a mock user for development\n            userProfile = {\n              id: \"mock-id\",\n              uid: firebaseUser.uid,\n              email: firebaseUser.email || \"test@example.com\",\n              userType: \"user\" as UserType,\n              createdAt: new Date(),\n              lastLoginAt: new Date(),\n            }\n          }\n\n          setUser(userProfile)\n          console.log(\"User profile loaded:\", userProfile.email)\n\n          // Store user data in AsyncStorage\n          await AsyncStorage.setItem(USER_STORAGE_KEY, JSON.stringify(userProfile))\n        } catch (error) {\n          console.error(\"Error in auth state change handler:\", error)\n          setUser(null)\n          await AsyncStorage.removeItem(USER_STORAGE_KEY)\n        }\n      } else {\n        console.log(\"No user found, clearing user state\")\n        setUser(null)\n        await AsyncStorage.removeItem(USER_STORAGE_KEY)\n      }\n\n      setLoading(false)\n    })\n\n    return () => {\n      console.log(\"Cleaning up auth state listener\")\n      unsubscribe()\n    }\n  }, [])\n\n  const signIn = async (email: string, password: string) => {\n    console.log(\"Attempting to sign in:\", email)\n    setLoading(true)\n    try {\n      await FirebaseService.signIn(email, password)\n      console.log(\"Sign in successful\")\n      // The onAuthStateChanged listener will update the user state\n\n      // For development/testing, create a mock user if Firebase is not properly configured\n      if (isDevelopment()) {\n        console.log(\"Development mode: Creating mock user\")\n        const mockUser = {\n          id: \"mock-id\",\n          uid: \"mock-uid\",\n          email: email,\n          userType: \"user\" as UserType,\n          createdAt: new Date(),\n          lastLoginAt: new Date(),\n        }\n        setUser(mockUser)\n        await AsyncStorage.setItem(USER_STORAGE_KEY, JSON.stringify(mockUser))\n      }\n\n      // Navigate to main app after successful login\n      try {\n        reset({\n          index: 0,\n          routes: [{ name: \"Main\" }],\n        })\n      } catch (navError) {\n        console.warn(\"Navigation error:\", navError)\n      }\n    } catch (error) {\n      console.error(\"Error signing in:\", error)\n\n      // For development/testing, create a mock user if Firebase is not properly configured\n      if (isDevelopment()) {\n        console.log(\"Development mode: Creating mock user\")\n        const mockUser = {\n          id: \"mock-id\",\n          uid: \"mock-uid\",\n          email: email,\n          userType: \"user\" as UserType,\n          createdAt: new Date(),\n          lastLoginAt: new Date(),\n        }\n        setUser(mockUser)\n        await AsyncStorage.setItem(USER_STORAGE_KEY, JSON.stringify(mockUser))\n      } else {\n        throw error\n      }\n    } finally {\n      setLoading(false)\n    }\n  }\n\n  const signUp = async (email: string, password: string, userType: UserType) => {\n    console.log(\"Attempting to sign up:\", email, \"as\", userType)\n    setLoading(true)\n    try {\n      await FirebaseService.signUp(email, password, userType)\n      console.log(\"Sign up successful\")\n      // The onAuthStateChanged listener will update the user state\n\n      // For development/testing, create a mock user if Firebase is not properly configured\n      if (isDevelopment()) {\n        console.log(\"Development mode: Creating mock user\")\n        const mockUser = {\n          id: \"mock-id\",\n          uid: \"mock-uid\",\n          email: email,\n          userType: userType,\n          createdAt: new Date(),\n          lastLoginAt: new Date(),\n        }\n        setUser(mockUser)\n        await AsyncStorage.setItem(USER_STORAGE_KEY, JSON.stringify(mockUser))\n      }\n\n      // Navigate to main app after successful signup\n      try {\n        reset({\n          index: 0,\n          routes: [{ name: \"Main\" }],\n        })\n      } catch (navError) {\n        console.warn(\"Navigation error:\", navError)\n      }\n    } catch (error) {\n      console.error(\"Error signing up:\", error)\n\n      // For development/testing, create a mock user if Firebase is not properly configured\n      if (isDevelopment()) {\n        console.log(\"Development mode: Creating mock user\")\n        const mockUser = {\n          id: \"mock-id\",\n          uid: \"mock-uid\",\n          email: email,\n          userType: userType,\n          createdAt: new Date(),\n          lastLoginAt: new Date(),\n        }\n        setUser(mockUser)\n        await AsyncStorage.setItem(USER_STORAGE_KEY, JSON.stringify(mockUser))\n      } else {\n        throw error\n      }\n    } finally {\n      setLoading(false)\n    }\n  }\n\n  const signOut = async () => {\n    console.log(\"Attempting to sign out\")\n    setLoading(true)\n    try {\n      await FirebaseService.signOut()\n      // Clear stored user data\n      await AsyncStorage.removeItem(USER_STORAGE_KEY)\n      setUser(null)\n      console.log(\"Sign out successful\")\n\n      // Navigate to Auth/Login screen after sign out\n      try {\n        reset({\n          index: 0,\n          routes: [{ name: \"Auth\" }],\n        })\n      } catch (navError) {\n        console.warn(\"Navigation error:\", navError)\n        // Fallback navigation\n        navigate(\"Auth\")\n      }\n    } catch (error) {\n      console.error(\"Error signing out:\", error)\n\n      // For development/testing, clear user state even if Firebase fails\n      await AsyncStorage.removeItem(USER_STORAGE_KEY)\n      setUser(null)\n\n      // Still navigate to Auth screen even if there was an error\n      try {\n        reset({\n          index: 0,\n          routes: [{ name: \"Auth\" }],\n        })\n      } catch (navError) {\n        console.warn(\"Navigation error:\", navError)\n        // Fallback navigation\n        navigate(\"Auth\")\n      }\n    } finally {\n      setLoading(false)\n    }\n  }\n\n  const updateProfile = async (data: Partial<User>) => {\n    if (!user) {\n      throw new Error(\"No user logged in\")\n    }\n\n    console.log(\"Updating user profile:\", data)\n    setLoading(true)\n    try {\n      await FirebaseService.updateUserProfile(user.id, data)\n\n      // Update local user state\n      const updatedUser = { ...user, ...data }\n      setUser(updatedUser)\n\n      // Update stored user data\n      await AsyncStorage.setItem(USER_STORAGE_KEY, JSON.stringify(updatedUser))\n      console.log(\"Profile update successful\")\n    } catch (error) {\n      console.error(\"Error updating profile:\", error)\n\n      // For development/testing, update local state even if Firebase fails\n      if (isDevelopment()) {\n        const updatedUser = { ...user, ...data }\n        setUser(updatedUser)\n        await AsyncStorage.setItem(USER_STORAGE_KEY, JSON.stringify(updatedUser))\n      } else {\n        throw error\n      }\n    } finally {\n      setLoading(false)\n    }\n  }\n\n  return (\n    <AuthContext.Provider value={{ user, loading, signIn, signUp, signOut, updateProfile }}>\n      {children}\n    </AuthContext.Provider>\n  )\n}\n\nexport const useAuth = () => {\n  const context = useContext(AuthContext)\n  if (context === undefined) {\n    throw new Error(\"useAuth must be used within an AuthProvider\")\n  }\n  return context\n}\n"],"mappings":"AAAA,YAAY,CAGZ,OAASA,aAAa,CAAEC,QAAQ,CAAEC,SAAS,CAAEC,UAAU,KAAQ,OAAO,CACtE,OAASC,kBAAkB,KAAQ,eAAe,CAClD,MAAO,CAAAC,YAAY,KAAM,2CAA2C,CACpE,OAASC,IAAI,0BACb,MAAO,CAAAC,eAAe,mCAEtB,OAASC,KAAK,CAAEC,QAAQ,8BACxB,OAASC,aAAa,oBAAsB,OAAAC,GAAA,IAAAC,IAAA,yBAW5C,KAAM,CAAAC,WAAW,CAAGb,aAAa,CAA8Bc,SAAS,CAAC,CAGzE,KAAM,CAAAC,gBAAgB,CAAG,kBAAkB,CAE3C,MAAO,MAAM,CAAAC,YAAqD,CAAGA,CAAC,CAAEC,QAAS,CAAC,GAAK,CACrF,KAAM,CAACC,IAAI,CAAEC,OAAO,CAAC,CAAGlB,QAAQ,CAAc,IAAI,CAAC,CACnD,KAAM,CAACmB,OAAO,CAAEC,UAAU,CAAC,CAAGpB,QAAQ,CAAC,IAAI,CAAC,CAG5CC,SAAS,CAAC,IAAM,CACd,KAAM,CAAAoB,cAAc,CAAG,KAAAA,CAAA,GAAY,CACjC,GAAI,CACF,KAAM,CAAAC,UAAU,CAAG,KAAM,CAAAlB,YAAY,CAACmB,OAAO,CAACT,gBAAgB,CAAC,CAC/D,GAAIQ,UAAU,CAAE,CACdJ,OAAO,CAACM,IAAI,CAACC,KAAK,CAACH,UAAU,CAAC,CAAC,CACjC,CACF,CAAE,MAAOI,KAAK,CAAE,CACdC,OAAO,CAACD,KAAK,CAAC,4BAA4B,CAAEA,KAAK,CAAC,CACpD,CAAC,OAAS,CACRN,UAAU,CAAC,KAAK,CAAC,CACnB,CACF,CAAC,CAEDC,cAAc,CAAC,CAAC,CAClB,CAAC,CAAE,EAAE,CAAC,CAENpB,SAAS,CAAC,IAAM,CACd0B,OAAO,CAACC,GAAG,CAAC,gCAAgC,CAAC,CAC7C,KAAM,CAAAC,WAAW,CAAG1B,kBAAkB,CAACE,IAAI,CAAE,KAAO,CAAAyB,YAAY,EAAK,CACnEV,UAAU,CAAC,IAAI,CAAC,CAChBO,OAAO,CAACC,GAAG,CAAC,qBAAqB,CAAEE,YAAY,CAAGA,YAAY,CAACC,KAAK,CAAG,SAAS,CAAC,CAEjF,GAAID,YAAY,CAAE,CAChB,GAAI,CAEF,GAAI,CAAAE,WAAW,CACf,GAAI,CACFA,WAAW,CAAG,KAAM,CAAA1B,eAAe,CAAC2B,cAAc,CAACH,YAAY,CAACI,GAAG,CAAC,CACtE,CAAE,MAAOR,KAAK,CAAE,CACdC,OAAO,CAACQ,IAAI,CAAC,+CAA+C,CAAET,KAAK,CAAC,CAEpEM,WAAW,CAAG,CACZI,EAAE,CAAE,SAAS,CACbF,GAAG,CAAEJ,YAAY,CAACI,GAAG,CACrBH,KAAK,CAAED,YAAY,CAACC,KAAK,EAAI,kBAAkB,CAC/CM,QAAQ,CAAE,MAAkB,CAC5BC,SAAS,CAAE,GAAI,CAAAC,IAAI,CAAC,CAAC,CACrBC,WAAW,CAAE,GAAI,CAAAD,IAAI,CAAC,CACxB,CAAC,CACH,CAEArB,OAAO,CAACc,WAAW,CAAC,CACpBL,OAAO,CAACC,GAAG,CAAC,sBAAsB,CAAEI,WAAW,CAACD,KAAK,CAAC,CAGtD,KAAM,CAAA3B,YAAY,CAACqC,OAAO,CAAC3B,gBAAgB,CAAEU,IAAI,CAACkB,SAAS,CAACV,WAAW,CAAC,CAAC,CAC3E,CAAE,MAAON,KAAK,CAAE,CACdC,OAAO,CAACD,KAAK,CAAC,qCAAqC,CAAEA,KAAK,CAAC,CAC3DR,OAAO,CAAC,IAAI,CAAC,CACb,KAAM,CAAAd,YAAY,CAACuC,UAAU,CAAC7B,gBAAgB,CAAC,CACjD,CACF,CAAC,IAAM,CACLa,OAAO,CAACC,GAAG,CAAC,oCAAoC,CAAC,CACjDV,OAAO,CAAC,IAAI,CAAC,CACb,KAAM,CAAAd,YAAY,CAACuC,UAAU,CAAC7B,gBAAgB,CAAC,CACjD,CAEAM,UAAU,CAAC,KAAK,CAAC,CACnB,CAAC,CAAC,CAEF,MAAO,IAAM,CACXO,OAAO,CAACC,GAAG,CAAC,iCAAiC,CAAC,CAC9CC,WAAW,CAAC,CAAC,CACf,CAAC,CACH,CAAC,CAAE,EAAE,CAAC,CAEN,KAAM,CAAAe,MAAM,CAAG,KAAAA,CAAOb,KAAa,CAAEc,QAAgB,GAAK,CACxDlB,OAAO,CAACC,GAAG,CAAC,wBAAwB,CAAEG,KAAK,CAAC,CAC5CX,UAAU,CAAC,IAAI,CAAC,CAChB,GAAI,CACF,KAAM,CAAAd,eAAe,CAACsC,MAAM,CAACb,KAAK,CAAEc,QAAQ,CAAC,CAC7ClB,OAAO,CAACC,GAAG,CAAC,oBAAoB,CAAC,CAIjC,GAAInB,aAAa,CAAC,CAAC,CAAE,CACnBkB,OAAO,CAACC,GAAG,CAAC,sCAAsC,CAAC,CACnD,KAAM,CAAAkB,QAAQ,CAAG,CACfV,EAAE,CAAE,SAAS,CACbF,GAAG,CAAE,UAAU,CACfH,KAAK,CAAEA,KAAK,CACZM,QAAQ,CAAE,MAAkB,CAC5BC,SAAS,CAAE,GAAI,CAAAC,IAAI,CAAC,CAAC,CACrBC,WAAW,CAAE,GAAI,CAAAD,IAAI,CAAC,CACxB,CAAC,CACDrB,OAAO,CAAC4B,QAAQ,CAAC,CACjB,KAAM,CAAA1C,YAAY,CAACqC,OAAO,CAAC3B,gBAAgB,CAAEU,IAAI,CAACkB,SAAS,CAACI,QAAQ,CAAC,CAAC,CACxE,CAGA,GAAI,CACFvC,KAAK,CAAC,CACJwC,KAAK,CAAE,CAAC,CACRC,MAAM,CAAE,CAAC,CAAEC,IAAI,CAAE,MAAO,CAAC,CAC3B,CAAC,CAAC,CACJ,CAAE,MAAOC,QAAQ,CAAE,CACjBvB,OAAO,CAACQ,IAAI,CAAC,mBAAmB,CAAEe,QAAQ,CAAC,CAC7C,CACF,CAAE,MAAOxB,KAAK,CAAE,CACdC,OAAO,CAACD,KAAK,CAAC,mBAAmB,CAAEA,KAAK,CAAC,CAGzC,GAAIjB,aAAa,CAAC,CAAC,CAAE,CACnBkB,OAAO,CAACC,GAAG,CAAC,sCAAsC,CAAC,CACnD,KAAM,CAAAkB,QAAQ,CAAG,CACfV,EAAE,CAAE,SAAS,CACbF,GAAG,CAAE,UAAU,CACfH,KAAK,CAAEA,KAAK,CACZM,QAAQ,CAAE,MAAkB,CAC5BC,SAAS,CAAE,GAAI,CAAAC,IAAI,CAAC,CAAC,CACrBC,WAAW,CAAE,GAAI,CAAAD,IAAI,CAAC,CACxB,CAAC,CACDrB,OAAO,CAAC4B,QAAQ,CAAC,CACjB,KAAM,CAAA1C,YAAY,CAACqC,OAAO,CAAC3B,gBAAgB,CAAEU,IAAI,CAACkB,SAAS,CAACI,QAAQ,CAAC,CAAC,CACxE,CAAC,IAAM,CACL,KAAM,CAAApB,KAAK,CACb,CACF,CAAC,OAAS,CACRN,UAAU,CAAC,KAAK,CAAC,CACnB,CACF,CAAC,CAED,KAAM,CAAA+B,MAAM,CAAG,KAAAA,CAAOpB,KAAa,CAAEc,QAAgB,CAAER,QAAkB,GAAK,CAC5EV,OAAO,CAACC,GAAG,CAAC,wBAAwB,CAAEG,KAAK,CAAE,IAAI,CAAEM,QAAQ,CAAC,CAC5DjB,UAAU,CAAC,IAAI,CAAC,CAChB,GAAI,CACF,KAAM,CAAAd,eAAe,CAAC6C,MAAM,CAACpB,KAAK,CAAEc,QAAQ,CAAER,QAAQ,CAAC,CACvDV,OAAO,CAACC,GAAG,CAAC,oBAAoB,CAAC,CAIjC,GAAInB,aAAa,CAAC,CAAC,CAAE,CACnBkB,OAAO,CAACC,GAAG,CAAC,sCAAsC,CAAC,CACnD,KAAM,CAAAkB,QAAQ,CAAG,CACfV,EAAE,CAAE,SAAS,CACbF,GAAG,CAAE,UAAU,CACfH,KAAK,CAAEA,KAAK,CACZM,QAAQ,CAAEA,QAAQ,CAClBC,SAAS,CAAE,GAAI,CAAAC,IAAI,CAAC,CAAC,CACrBC,WAAW,CAAE,GAAI,CAAAD,IAAI,CAAC,CACxB,CAAC,CACDrB,OAAO,CAAC4B,QAAQ,CAAC,CACjB,KAAM,CAAA1C,YAAY,CAACqC,OAAO,CAAC3B,gBAAgB,CAAEU,IAAI,CAACkB,SAAS,CAACI,QAAQ,CAAC,CAAC,CACxE,CAGA,GAAI,CACFvC,KAAK,CAAC,CACJwC,KAAK,CAAE,CAAC,CACRC,MAAM,CAAE,CAAC,CAAEC,IAAI,CAAE,MAAO,CAAC,CAC3B,CAAC,CAAC,CACJ,CAAE,MAAOC,QAAQ,CAAE,CACjBvB,OAAO,CAACQ,IAAI,CAAC,mBAAmB,CAAEe,QAAQ,CAAC,CAC7C,CACF,CAAE,MAAOxB,KAAK,CAAE,CACdC,OAAO,CAACD,KAAK,CAAC,mBAAmB,CAAEA,KAAK,CAAC,CAGzC,GAAIjB,aAAa,CAAC,CAAC,CAAE,CACnBkB,OAAO,CAACC,GAAG,CAAC,sCAAsC,CAAC,CACnD,KAAM,CAAAkB,QAAQ,CAAG,CACfV,EAAE,CAAE,SAAS,CACbF,GAAG,CAAE,UAAU,CACfH,KAAK,CAAEA,KAAK,CACZM,QAAQ,CAAEA,QAAQ,CAClBC,SAAS,CAAE,GAAI,CAAAC,IAAI,CAAC,CAAC,CACrBC,WAAW,CAAE,GAAI,CAAAD,IAAI,CAAC,CACxB,CAAC,CACDrB,OAAO,CAAC4B,QAAQ,CAAC,CACjB,KAAM,CAAA1C,YAAY,CAACqC,OAAO,CAAC3B,gBAAgB,CAAEU,IAAI,CAACkB,SAAS,CAACI,QAAQ,CAAC,CAAC,CACxE,CAAC,IAAM,CACL,KAAM,CAAApB,KAAK,CACb,CACF,CAAC,OAAS,CACRN,UAAU,CAAC,KAAK,CAAC,CACnB,CACF,CAAC,CAED,KAAM,CAAAgC,OAAO,CAAG,KAAAA,CAAA,GAAY,CAC1BzB,OAAO,CAACC,GAAG,CAAC,wBAAwB,CAAC,CACrCR,UAAU,CAAC,IAAI,CAAC,CAChB,GAAI,CACF,KAAM,CAAAd,eAAe,CAAC8C,OAAO,CAAC,CAAC,CAE/B,KAAM,CAAAhD,YAAY,CAACuC,UAAU,CAAC7B,gBAAgB,CAAC,CAC/CI,OAAO,CAAC,IAAI,CAAC,CACbS,OAAO,CAACC,GAAG,CAAC,qBAAqB,CAAC,CAGlC,GAAI,CACFrB,KAAK,CAAC,CACJwC,KAAK,CAAE,CAAC,CACRC,MAAM,CAAE,CAAC,CAAEC,IAAI,CAAE,MAAO,CAAC,CAC3B,CAAC,CAAC,CACJ,CAAE,MAAOC,QAAQ,CAAE,CACjBvB,OAAO,CAACQ,IAAI,CAAC,mBAAmB,CAAEe,QAAQ,CAAC,CAE3C1C,QAAQ,CAAC,MAAM,CAAC,CAClB,CACF,CAAE,MAAOkB,KAAK,CAAE,CACdC,OAAO,CAACD,KAAK,CAAC,oBAAoB,CAAEA,KAAK,CAAC,CAG1C,KAAM,CAAAtB,YAAY,CAACuC,UAAU,CAAC7B,gBAAgB,CAAC,CAC/CI,OAAO,CAAC,IAAI,CAAC,CAGb,GAAI,CACFX,KAAK,CAAC,CACJwC,KAAK,CAAE,CAAC,CACRC,MAAM,CAAE,CAAC,CAAEC,IAAI,CAAE,MAAO,CAAC,CAC3B,CAAC,CAAC,CACJ,CAAE,MAAOC,QAAQ,CAAE,CACjBvB,OAAO,CAACQ,IAAI,CAAC,mBAAmB,CAAEe,QAAQ,CAAC,CAE3C1C,QAAQ,CAAC,MAAM,CAAC,CAClB,CACF,CAAC,OAAS,CACRY,UAAU,CAAC,KAAK,CAAC,CACnB,CACF,CAAC,CAED,KAAM,CAAAiC,aAAa,CAAG,KAAO,CAAAC,IAAmB,EAAK,CACnD,GAAI,CAACrC,IAAI,CAAE,CACT,KAAM,IAAI,CAAAsC,KAAK,CAAC,mBAAmB,CAAC,CACtC,CAEA5B,OAAO,CAACC,GAAG,CAAC,wBAAwB,CAAE0B,IAAI,CAAC,CAC3ClC,UAAU,CAAC,IAAI,CAAC,CAChB,GAAI,CACF,KAAM,CAAAd,eAAe,CAACkD,iBAAiB,CAACvC,IAAI,CAACmB,EAAE,CAAEkB,IAAI,CAAC,CAGtD,KAAM,CAAAG,WAAW,CAAAC,MAAA,CAAAC,MAAA,IAAQ1C,IAAI,CAAKqC,IAAI,CAAE,CACxCpC,OAAO,CAACuC,WAAW,CAAC,CAGpB,KAAM,CAAArD,YAAY,CAACqC,OAAO,CAAC3B,gBAAgB,CAAEU,IAAI,CAACkB,SAAS,CAACe,WAAW,CAAC,CAAC,CACzE9B,OAAO,CAACC,GAAG,CAAC,2BAA2B,CAAC,CAC1C,CAAE,MAAOF,KAAK,CAAE,CACdC,OAAO,CAACD,KAAK,CAAC,yBAAyB,CAAEA,KAAK,CAAC,CAG/C,GAAIjB,aAAa,CAAC,CAAC,CAAE,CACnB,KAAM,CAAAgD,WAAW,CAAAC,MAAA,CAAAC,MAAA,IAAQ1C,IAAI,CAAKqC,IAAI,CAAE,CACxCpC,OAAO,CAACuC,WAAW,CAAC,CACpB,KAAM,CAAArD,YAAY,CAACqC,OAAO,CAAC3B,gBAAgB,CAAEU,IAAI,CAACkB,SAAS,CAACe,WAAW,CAAC,CAAC,CAC3E,CAAC,IAAM,CACL,KAAM,CAAA/B,KAAK,CACb,CACF,CAAC,OAAS,CACRN,UAAU,CAAC,KAAK,CAAC,CACnB,CACF,CAAC,CAED,MACE,CAAAT,IAAA,CAACC,WAAW,CAACgD,QAAQ,EAACC,KAAK,CAAE,CAAE5C,IAAI,CAAEE,OAAO,CAAEyB,MAAM,CAAEO,MAAM,CAAEC,OAAO,CAAEC,aAAc,CAAE,CAAArC,QAAA,CACpFA,QAAQ,CACW,CAAC,CAE3B,CAAC,CAED,MAAO,MAAM,CAAA8C,OAAO,CAAGA,CAAA,GAAM,CAC3B,KAAM,CAAAC,OAAO,CAAG7D,UAAU,CAACU,WAAW,CAAC,CACvC,GAAImD,OAAO,GAAKlD,SAAS,CAAE,CACzB,KAAM,IAAI,CAAA0C,KAAK,CAAC,6CAA6C,CAAC,CAChE,CACA,MAAO,CAAAQ,OAAO,CAChB,CAAC","ignoreList":[]},"metadata":{"hasCjsExports":false},"sourceType":"module","externalDependencies":[]}