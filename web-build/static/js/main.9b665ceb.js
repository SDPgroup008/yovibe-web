(()=>{var e={35358:(e,t,n)=>{var o={"./af":17582,"./af.js":17582,"./ar":93042,"./ar-dz":54265,"./ar-dz.js":54265,"./ar-kw":92553,"./ar-kw.js":92553,"./ar-ly":85352,"./ar-ly.js":85352,"./ar-ma":67097,"./ar-ma.js":67097,"./ar-ps":76150,"./ar-ps.js":76150,"./ar-sa":84427,"./ar-sa.js":84427,"./ar-tn":7221,"./ar-tn.js":7221,"./ar.js":93042,"./az":60458,"./az.js":60458,"./be":17596,"./be.js":17596,"./bg":93830,"./bg.js":93830,"./bm":27044,"./bm.js":27044,"./bn":58573,"./bn-bd":13296,"./bn-bd.js":13296,"./bn.js":58573,"./bo":25614,"./bo.js":25614,"./br":62041,"./br.js":62041,"./bs":91786,"./bs.js":91786,"./ca":75833,"./ca.js":75833,"./cs":52711,"./cs.js":52711,"./cv":71036,"./cv.js":71036,"./cy":84977,"./cy.js":84977,"./da":8770,"./da.js":8770,"./de":67342,"./de-at":81566,"./de-at.js":81566,"./de-ch":87544,"./de-ch.js":87544,"./de.js":67342,"./dv":82875,"./dv.js":82875,"./el":78536,"./el.js":78536,"./en-au":38617,"./en-au.js":38617,"./en-ca":79227,"./en-ca.js":79227,"./en-gb":59754,"./en-gb.js":59754,"./en-ie":37217,"./en-ie.js":37217,"./en-il":85418,"./en-il.js":85418,"./en-in":80800,"./en-in.js":80800,"./en-nz":67299,"./en-nz.js":67299,"./en-sg":76305,"./en-sg.js":76305,"./eo":8673,"./eo.js":8673,"./es":71301,"./es-do":3187,"./es-do.js":3187,"./es-mx":48223,"./es-mx.js":48223,"./es-us":37634,"./es-us.js":37634,"./es.js":71301,"./et":4976,"./et.js":4976,"./eu":11847,"./eu.js":11847,"./fa":74372,"./fa.js":74372,"./fi":41628,"./fi.js":41628,"./fil":56802,"./fil.js":56802,"./fo":42874,"./fo.js":42874,"./fr":9853,"./fr-ca":87170,"./fr-ca.js":87170,"./fr-ch":22825,"./fr-ch.js":22825,"./fr.js":9853,"./fy":68876,"./fy.js":68876,"./ga":93533,"./ga.js":93533,"./gd":82770,"./gd.js":82770,"./gl":98602,"./gl.js":98602,"./gom-deva":63059,"./gom-deva.js":63059,"./gom-latn":48212,"./gom-latn.js":48212,"./gu":23409,"./gu.js":23409,"./he":17210,"./he.js":17210,"./hi":4750,"./hi.js":4750,"./hr":51315,"./hr.js":51315,"./hu":47626,"./hu.js":47626,"./hy-am":91317,"./hy-am.js":91317,"./id":26892,"./id.js":26892,"./is":97577,"./is.js":97577,"./it":57628,"./it-ch":3046,"./it-ch.js":3046,"./it.js":57628,"./ja":92504,"./ja.js":92504,"./jv":25917,"./jv.js":25917,"./ka":64513,"./ka.js":64513,"./kk":94935,"./kk.js":94935,"./km":96661,"./km.js":96661,"./kn":89964,"./kn.js":89964,"./ko":98067,"./ko.js":98067,"./ku":61165,"./ku-kmr":85158,"./ku-kmr.js":85158,"./ku.js":61165,"./ky":11177,"./ky.js":11177,"./lb":2967,"./lb.js":2967,"./lo":81972,"./lo.js":81972,"./lt":58469,"./lt.js":58469,"./lv":33155,"./lv.js":33155,"./me":87935,"./me.js":87935,"./mi":74483,"./mi.js":74483,"./mk":32501,"./mk.js":32501,"./ml":73120,"./ml.js":73120,"./mn":20266,"./mn.js":20266,"./mr":19406,"./mr.js":19406,"./ms":80109,"./ms-my":90864,"./ms-my.js":90864,"./ms.js":80109,"./mt":22904,"./mt.js":22904,"./my":44067,"./my.js":44067,"./nb":21301,"./nb.js":21301,"./ne":81152,"./ne.js":81152,"./nl":76735,"./nl-be":97761,"./nl-be.js":97761,"./nl.js":76735,"./nn":37569,"./nn.js":37569,"./oc-lnc":20833,"./oc-lnc.js":20833,"./pa-in":3044,"./pa-in.js":3044,"./pl":34249,"./pl.js":34249,"./pt":87585,"./pt-br":26826,"./pt-br.js":26826,"./pt.js":87585,"./ro":62526,"./ro.js":62526,"./ru":62204,"./ru.js":62204,"./sd":43270,"./sd.js":43270,"./se":61541,"./se.js":61541,"./si":71921,"./si.js":71921,"./sk":49935,"./sk.js":49935,"./sl":46254,"./sl.js":46254,"./sq":59897,"./sq.js":59897,"./sr":42496,"./sr-cyrl":11135,"./sr-cyrl.js":11135,"./sr.js":42496,"./ss":32215,"./ss.js":32215,"./sv":84716,"./sv.js":84716,"./sw":50803,"./sw.js":50803,"./ta":31538,"./ta.js":31538,"./te":2302,"./te.js":2302,"./tet":25280,"./tet.js":25280,"./tg":14100,"./tg.js":14100,"./th":95385,"./th.js":95385,"./tk":736,"./tk.js":736,"./tl-ph":79726,"./tl-ph.js":79726,"./tlh":41873,"./tlh.js":41873,"./tr":36463,"./tr.js":36463,"./tzl":27491,"./tzl.js":27491,"./tzm":29500,"./tzm-latn":80196,"./tzm-latn.js":80196,"./tzm.js":29500,"./ug-cn":91287,"./ug-cn.js":91287,"./uk":35341,"./uk.js":35341,"./ur":36246,"./ur.js":36246,"./uz":55550,"./uz-latn":77254,"./uz-latn.js":77254,"./uz.js":55550,"./vi":78796,"./vi.js":78796,"./x-pseudo":22736,"./x-pseudo.js":22736,"./yo":28621,"./yo.js":28621,"./zh-cn":67601,"./zh-cn.js":67601,"./zh-hk":39053,"./zh-hk.js":39053,"./zh-mo":71248,"./zh-mo.js":71248,"./zh-tw":74725,"./zh-tw.js":74725};function r(e){var t=a(e);return n(t)}function a(e){if(!n.o(o,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return o[e]}r.keys=function(){return Object.keys(o)},r.resolve=a,e.exports=r,r.id=35358},66873:(e,t,n)=>{"use strict";var o=n(47401),r=n(66986),a=n(44979),l=n(36665),i=n(95232),s=n(91087),d=n(7908),c=n(51058),u=n(56510);n(88453),n(20698),n(47543),n(58544);const g={apiKey:"AIzaSyCu3hXDaqQ58VvHNQ1On5wxcgaU0CIXCo8",authDomain:"eco-guardian-bd74f.firebaseapp.com",projectId:"eco-guardian-bd74f",storageBucket:"eco-guardian-bd74f.appspot.com",messagingSenderId:"917905910857",appId:"1:917905910857:android:5886ab1db46cec56912398"};let f,m,h,F;try{f=(0,d.getApps)().length?(0,d.getApp)():(0,d.initializeApp)(g),m=(0,i.getAuth)(f),h=(0,c.getFirestore)(f),F=(0,u.getStorage)(f)}catch(He){console.error("Error initializing Firebase:",He),m={currentUser:null,onAuthStateChanged:e=>(e(null),()=>{})},h={},F={}}var y=n(18683);const x="undefined"!==typeof process?"production":"development",p=()=>"development"===x;const v=new class{async signUp(e,t,n){try{console.log("FirebaseService: Signing up user",e,"as",n);const o=await(0,i.createUserWithEmailAndPassword)(m,e,t),{uid:r}=o.user;console.log("FirebaseService: User created with UID",r);const a=await(0,c.addDoc)((0,c.collection)(h,"users"),{uid:r,email:e,userType:n,createdAt:c.Timestamp.now(),lastLoginAt:c.Timestamp.now()});return void console.log("FirebaseService: User profile created with ID",a.id)}catch(He){throw console.error("FirebaseService: Error signing up:",He),He}}async signIn(e,t){try{return console.log("FirebaseService: Signing in user",e),await(0,i.signInWithEmailAndPassword)(m,e,t),void console.log("FirebaseService: Sign in successful")}catch(He){throw console.error("FirebaseService: Error signing in:",He),He}}async signOut(){try{return console.log("FirebaseService: Signing out user"),await(0,i.signOut)(m),void console.log("FirebaseService: Sign out successful")}catch(He){throw console.error("FirebaseService: Error signing out:",He),He}}async getUserProfile(e){try{console.log("FirebaseService: Getting user profile for UID",e);const t=(0,c.collection)(h,"users"),n=(0,c.query)(t,(0,c.where)("uid","==",e)),o=await(0,c.getDocs)(n);if(o.empty)throw console.error("FirebaseService: User not found for UID",e),new Error("User not found");const r=o.docs[0],a=r.data();return console.log("FirebaseService: User profile found",r.id),{id:r.id,uid:a.uid,email:a.email,userType:a.userType,displayName:a.displayName,photoURL:a.photoURL,venueId:a.venueId,isFrozen:a.isFrozen,createdAt:a.createdAt.toDate(),lastLoginAt:a.lastLoginAt.toDate()}}catch(He){throw console.error("FirebaseService: Error getting user profile:",He),He}}async getCurrentUser(){try{const e=m.currentUser;return e?(console.log("FirebaseService: Getting current user profile for",e.email),await this.getUserProfile(e.uid)):(console.log("FirebaseService: No current user"),null)}catch(He){throw console.error("FirebaseService: Error getting current user:",He),He}}async updateUserProfile(e,t){try{console.log("FirebaseService: Updating user profile",e);const n=(0,c.doc)(h,"users",e);return await(0,c.updateDoc)(n,Object.assign({},t,{lastLoginAt:c.Timestamp.now()})),void console.log("FirebaseService: User profile updated")}catch(He){throw console.error("FirebaseService: Error updating user profile:",He),He}}async getVenues(){try{if(console.log("FirebaseService: Getting venues"),p())try{const e=(0,c.collection)(h,"venues"),t=await(0,c.getDocs)(e);if(t.empty)return console.log("FirebaseService: No venues found, returning mock data"),this.getMockVenues();const n=[];return t.forEach((e=>{const t=e.data();n.push({id:e.id,name:t.name,location:t.location,description:t.description,backgroundImageUrl:t.backgroundImageUrl,categories:t.categories,vibeRating:t.vibeRating,todayImages:t.todayImages||[],latitude:t.latitude,longitude:t.longitude,weeklyPrograms:t.weeklyPrograms||{},ownerId:t.ownerId,createdAt:t.createdAt.toDate()})})),console.log("FirebaseService: Found",n.length,"venues"),n}catch(He){return console.warn("FirebaseService: Error getting venues, returning mock data:",He),this.getMockVenues()}const e=(0,c.collection)(h,"venues"),t=await(0,c.getDocs)(e),n=[];return t.forEach((e=>{const t=e.data();n.push({id:e.id,name:t.name,location:t.location,description:t.description,backgroundImageUrl:t.backgroundImageUrl,categories:t.categories,vibeRating:t.vibeRating,todayImages:t.todayImages||[],latitude:t.latitude,longitude:t.longitude,weeklyPrograms:t.weeklyPrograms||{},ownerId:t.ownerId,createdAt:t.createdAt.toDate()})})),console.log("FirebaseService: Found",n.length,"venues"),n}catch(He){throw console.error("FirebaseService: Error getting venues:",He),He}}getMockVenues(){return[{id:"venue1",name:"Club Neon",location:"123 Main St, Downtown",description:"The hottest nightclub in town with amazing DJs and dance floors.",backgroundImageUrl:"https://images.unsplash.com/photo-1566737236500-c8ac43014a67?ixlib=rb-1.2.1&auto=format&fit=crop&w=1350&q=80",categories:["Nightclub","Dance","EDM"],vibeRating:4.8,latitude:40.7128,longitude:-74.006,weeklyPrograms:{Monday:"Closed",Tuesday:"Techno Tuesday with DJ Max",Wednesday:"Ladies Night - Free entry for ladies",Thursday:"Throwback Thursday - 90s and 00s hits",Friday:"International DJs and VIP tables",Saturday:"Club Neon Signature Night",Sunday:"Sunday Chill Sessions"},ownerId:"owner1",createdAt:new Date},{id:"venue2",name:"Jazz & Whiskey",location:"456 Oak Ave, Midtown",description:"Sophisticated jazz bar with premium whiskey selection and live performances.",backgroundImageUrl:"https://images.unsplash.com/photo-1514933651103-005eec06c04b?ixlib=rb-1.2.1&auto=format&fit=crop&w=1350&q=80",categories:["Jazz","Bar","Live Music"],vibeRating:4.5,latitude:40.7308,longitude:-73.9973,weeklyPrograms:{Monday:"Closed",Tuesday:"Amateur Jazz Night",Wednesday:"Whiskey Tasting Event",Thursday:"Classic Jazz Quartet",Friday:"Featured Artist Performance",Saturday:"Premium Jazz Experience",Sunday:"Sunday Blues & Soul"},ownerId:"owner2",createdAt:new Date},{id:"venue3",name:"Rooftop Lounge",location:"789 Skyview Dr, Uptown",description:"Elegant rooftop bar with panoramic city views and craft cocktails.",backgroundImageUrl:"https://images.unsplash.com/photo-1517457373958-b7bdd4587205?ixlib=rb-1.2.1&auto=format&fit=crop&w=1350&q=80",categories:["Lounge","Rooftop","Cocktails"],vibeRating:4.7,latitude:40.758,longitude:-73.9855,weeklyPrograms:{Monday:"Monday Sunset Sessions",Tuesday:"Taco & Tequila Tuesday",Wednesday:"Wine Down Wednesday",Thursday:"Acoustic Live Sets",Friday:"DJ & Dancing under the Stars",Saturday:"VIP Bottle Service Night",Sunday:"Sunday Brunch & Beats"},ownerId:"owner3",createdAt:new Date}]}async getVenuesByOwner(e){try{const t=(0,c.collection)(h,"venues"),n=(0,c.query)(t,(0,c.where)("ownerId","==",e)),o=await(0,c.getDocs)(n),r=[];return o.forEach((e=>{const t=e.data();r.push({id:e.id,name:t.name,location:t.location,description:t.description,backgroundImageUrl:t.backgroundImageUrl,categories:t.categories,vibeRating:t.vibeRating,todayImages:t.todayImages||[],latitude:t.latitude,longitude:t.longitude,weeklyPrograms:t.weeklyPrograms||{},ownerId:t.ownerId,createdAt:t.createdAt.toDate()})})),r}catch(He){throw console.error("Error getting venues by owner:",He),He}}async getVenueById(e){try{const t=(0,c.doc)(h,"venues",e),n=await(0,c.getDoc)(t);if(!n.exists())return null;const o=n.data();return{id:n.id,name:o.name,location:o.location,description:o.description,backgroundImageUrl:o.backgroundImageUrl,categories:o.categories,vibeRating:o.vibeRating,todayImages:o.todayImages||[],latitude:o.latitude,longitude:o.longitude,weeklyPrograms:o.weeklyPrograms||{},ownerId:o.ownerId,createdAt:o.createdAt.toDate()}}catch(He){throw console.error("Error getting venue by ID:",He),He}}async addVenue(e){try{return(await(0,c.addDoc)((0,c.collection)(h,"venues"),Object.assign({},e,{createdAt:c.Timestamp.fromDate(e.createdAt)}))).id}catch(He){throw console.error("Error adding venue:",He),He}}async updateVenue(e,t){try{const n=(0,c.doc)(h,"venues",e);return void await(0,c.updateDoc)(n,t)}catch(He){throw console.error("Error updating venue:",He),He}}async updateVenuePrograms(e,t){try{const n=(0,c.doc)(h,"venues",e);return void await(0,c.updateDoc)(n,{weeklyPrograms:t})}catch(He){throw console.error("Error updating venue programs:",He),He}}async deleteEventsByVenue(e){try{console.log("FirebaseService: Deleting events for venue",e);const t=(0,c.collection)(h,"events"),n=(0,c.query)(t,(0,c.where)("venueId","==",e)),o=await(0,c.getDocs)(n),r=[];return o.forEach((e=>{r.push((0,c.deleteDoc)(e.ref))})),await Promise.all(r),void console.log(`FirebaseService: Deleted ${r.length} events for venue ${e}`)}catch(He){throw console.error("Error deleting events by venue:",He),He}}async deleteVenue(e){try{console.log("FirebaseService: Deleting venue",e);const t=(0,c.doc)(h,"venues",e);return void((await(0,c.getDoc)(t)).exists()?(await(0,c.deleteDoc)(t),console.log("FirebaseService: Venue deleted successfully")):console.warn("FirebaseService: Venue not found",e))}catch(He){throw console.error("Error deleting venue:",He),He}}async getEvents(){try{console.log("FirebaseService: Getting events");try{const e=(0,c.collection)(h,"events"),t=await(0,c.getDocs)(e),n=[];t.forEach((e=>{const t=e.data(),o=t.date.toDate();o>=new Date&&n.push({id:e.id,name:t.name,venueId:t.venueId,venueName:t.venueName,description:t.description,date:o,posterImageUrl:t.posterImageUrl,artists:t.artists,isFeatured:t.isFeatured,location:t.location,priceIndicator:t.priceIndicator||1,attendees:t.attendees||[],createdAt:t.createdAt.toDate(),createdBy:t.createdBy,createdByType:t.createdByType})})),console.log("FirebaseService: Found",n.length,"events");return n.sort(((e,t)=>e.date.getTime()-t.date.getTime()))}catch(He){if(console.error("Error getting events from Firestore:",He),p())return console.warn("Development mode: Returning empty events array"),[];throw He}}catch(He){throw console.error("Error getting events:",He),He}}async getFeaturedEvents(){try{const e=(0,c.collection)(h,"events"),t=(0,c.query)(e,(0,c.where)("isFeatured","==",!0)),n=await(0,c.getDocs)(t),o=[];return n.forEach((e=>{const t=e.data(),n=t.date.toDate();n>=new Date&&o.push({id:e.id,name:t.name,venueId:t.venueId,venueName:t.venueName,description:t.description,date:n,posterImageUrl:t.posterImageUrl,artists:t.artists,isFeatured:t.isFeatured,location:t.location,priceIndicator:t.priceIndicator||1,attendees:t.attendees||[],createdAt:t.createdAt.toDate(),createdBy:t.createdBy,createdByType:t.createdByType})})),o}catch(He){return console.error("Error getting featured events:",He),[]}}async getEventsByVenue(e){try{const t=(0,c.collection)(h,"events"),n=(0,c.query)(t,(0,c.where)("venueId","==",e)),o=await(0,c.getDocs)(n),r=[];return o.forEach((e=>{const t=e.data(),n=t.date.toDate();n>=new Date&&r.push({id:e.id,name:t.name,venueId:t.venueId,venueName:t.venueName,description:t.description,date:n,posterImageUrl:t.posterImageUrl,artists:t.artists,isFeatured:t.isFeatured,location:t.location,priceIndicator:t.priceIndicator||1,attendees:t.attendees||[],createdAt:t.createdAt.toDate(),createdBy:t.createdBy,createdByType:t.createdByType})})),r}catch(He){throw console.error("Error getting events by venue:",He),He}}async getEventById(e){try{const t=(0,c.doc)(h,"events",e),n=await(0,c.getDoc)(t);if(!n.exists())return null;const o=n.data();return{id:n.id,name:o.name,venueId:o.venueId,venueName:o.venueName,description:o.description,date:o.date.toDate(),posterImageUrl:o.posterImageUrl,artists:o.artists,isFeatured:o.isFeatured,location:o.location,priceIndicator:o.priceIndicator||1,attendees:o.attendees||[],createdAt:o.createdAt.toDate(),createdBy:o.createdBy,createdByType:o.createdByType}}catch(He){throw console.error("Error getting event by ID:",He),He}}async addEvent(e){try{const t={name:e.name,venueId:e.venueId,venueName:e.venueName,description:e.description,date:c.Timestamp.fromDate(e.date),posterImageUrl:e.posterImageUrl,artists:e.artists,isFeatured:e.isFeatured,location:e.location,priceIndicator:e.priceIndicator,entryFee:e.entryFee,attendees:e.attendees||[],createdAt:c.Timestamp.fromDate(new Date),createdBy:e.createdBy,createdByType:e.createdByType};return(await(0,c.addDoc)((0,c.collection)(h,"events"),t)).id}catch(He){throw console.error("Error adding event:",He),He}}async updateEvent(e,t){try{const n=(0,c.doc)(h,"events",e),o=Object.assign({},t);return t.date&&(o.date=c.Timestamp.fromDate(t.date)),void await(0,c.updateDoc)(n,o)}catch(He){throw console.error("Error updating event:",He),He}}async deleteEvent(e){try{console.log("FirebaseService: Deleting event",e);const t=(0,c.doc)(h,"events",e);return void((await(0,c.getDoc)(t)).exists()?(await(0,c.deleteDoc)(t),console.log("FirebaseService: Event deleted successfully")):console.warn("FirebaseService: Event not found",e))}catch(He){throw console.error("Error deleting event:",He),He}}async deletePastEvents(){try{console.log("FirebaseService: Deleting past events");const e=new Date;e.setHours(0,0,0,0);const t=(0,c.collection)(h,"events"),n=await(0,c.getDocs)(t),o=[];n.forEach((t=>{const n=t.data(),r=n.date.toDate();r<e&&(console.log(`FirebaseService: Deleting past event: ${n.name} (${r.toDateString()})`),o.push(this.deleteEvent(t.id)))})),await Promise.all(o),console.log(`FirebaseService: Deleted ${o.length} past events`)}catch(He){throw console.error("Error deleting past events:",He),He}}async uploadVenueImage(e){try{if(console.log("FirebaseService: Uploading venue image"),e.startsWith("http")&&!e.startsWith("data:"))return console.log("FirebaseService: Image is already a URL, returning directly"),e;if(p())return"https://images.unsplash.com/photo-1566737236500-c8ac43014a67?ixlib=rb-1.2.1&auto=format&fit=crop&w=1350&q=80";const t=`venues/${(0,y.default)()}`,n=(0,u.ref)(F,t);if(e.startsWith("data:")){await(0,u.uploadString)(n,e,"data_url");return await(0,u.getDownloadURL)(n)}const o=await fetch(e),r=await o.blob(),a=await(0,u.uploadBytes)(n,r);return await(0,u.getDownloadURL)(a.ref)}catch(He){return console.error("FirebaseService: Error uploading venue image:",He),"https://images.unsplash.com/photo-1566737236500-c8ac43014a67?ixlib=rb-1.2.1&auto=format&fit=crop&w=1350&q=80"}}async uploadEventImage(e){try{if(console.log("FirebaseService: Uploading event image",e.substring(0,50)+"..."),e.startsWith("http")&&!e.startsWith("data:"))return console.log("FirebaseService: Image is already a URL, returning directly"),e;const t=`events/${(0,y.default)()}`,n=(0,u.ref)(F,t);if(e.startsWith("data:")){console.log("FirebaseService: Uploading data URL"),await(0,u.uploadString)(n,e,"data_url");const t=await(0,u.getDownloadURL)(n);return console.log("FirebaseService: Upload successful, URL:",t.substring(0,50)+"..."),t}console.log("FirebaseService: Fetching image data");const o=await fetch(e),r=await o.blob();console.log("FirebaseService: Uploading blob to Firebase Storage");const a=await(0,u.uploadBytes)(n,r),l=await(0,u.getDownloadURL)(a.ref);return console.log("FirebaseService: Upload successful, URL:",l.substring(0,50)+"..."),l}catch(He){if(console.error("FirebaseService: Error uploading event image:",He),p())return console.warn("FirebaseService: Using placeholder image due to error"),"https://images.unsplash.com/photo-1514525253161-7a46d19cd819?ixlib=rb-1.2.1&auto=format&fit=crop&w=1350&q=80";throw He}}async getAllUsers(){try{const e=(0,c.collection)(h,"users"),t=await(0,c.getDocs)(e),n=[];return t.forEach((e=>{const t=e.data();n.push({id:e.id,uid:t.uid,email:t.email,userType:t.userType,displayName:t.displayName,photoURL:t.photoURL,venueId:t.venueId,isFrozen:t.isFrozen,createdAt:t.createdAt.toDate(),lastLoginAt:t.lastLoginAt.toDate()})})),n}catch(He){throw console.error("Error getting all users:",He),He}}async getClubOwners(){try{const e=(0,c.collection)(h,"users"),t=(0,c.query)(e,(0,c.where)("userType","==","club_owner")),n=await(0,c.getDocs)(t),o=[];return n.forEach((e=>{const t=e.data();o.push({id:e.id,uid:t.uid,email:t.email,userType:t.userType,displayName:t.displayName,photoURL:t.photoURL,venueId:t.venueId,isFrozen:t.isFrozen,createdAt:t.createdAt.toDate(),lastLoginAt:t.lastLoginAt.toDate()})})),o}catch(He){throw console.error("Error getting club owners:",He),He}}async freezeUser(e,t){try{const n=(0,c.doc)(h,"users",e);return void await(0,c.updateDoc)(n,{isFrozen:t})}catch(He){throw console.error("Error freezing/unfreezing user:",He),He}}async deleteUser(e){try{console.log("FirebaseService: Deleting user",e);const t=(0,c.doc)(h,"users",e),n=await(0,c.getDoc)(t);if(n.exists()){if("club_owner"===n.data().userType){const t=(0,c.collection)(h,"venues"),n=(0,c.query)(t,(0,c.where)("ownerId","==",e)),o=await(0,c.getDocs)(n),r=[];o.forEach((e=>{r.push(this.deleteEventsByVenue(e.id)),r.push((0,c.deleteDoc)(e.ref))})),await Promise.all(r),console.log(`FirebaseService: Deleted ${o.size} venues for user ${e}`)}const t=(0,c.collection)(h,"events"),o=(0,c.query)(t,(0,c.where)("createdBy","==",e)),r=await(0,c.getDocs)(o),a=[];r.forEach((e=>{a.push((0,c.deleteDoc)(e.ref))})),await Promise.all(a),console.log(`FirebaseService: Deleted ${r.size} events created by user ${e}`)}return await(0,c.deleteDoc)(t),void console.log("FirebaseService: User deleted successfully")}catch(He){throw console.error("Error deleting user:",He),He}}};const j=(0,n(8179).createNavigationContainerRef)();function b(e,t){j.isReady()?j.navigate({name:e,params:t}):console.warn("Navigation attempted before navigationRef was ready")}function w(e){j.isReady()?j.reset(e):console.warn("Navigation reset attempted before navigationRef was ready")}var C=n(60397);const B=(0,l.createContext)(void 0),S="yovibe_user_data",T=({children:e})=>{const[t,n]=(0,l.useState)(null),[o,r]=(0,l.useState)(!0);(0,l.useEffect)((()=>{(async()=>{try{const e=await s.default.getItem(S);e&&n(JSON.parse(e))}catch(He){console.error("Error loading stored user:",He)}finally{r(!1)}})()}),[]),(0,l.useEffect)((()=>{console.log("Setting up auth state listener");const e=(0,i.onAuthStateChanged)(m,(async e=>{if(r(!0),console.log("Auth state changed:",e?e.email:"No user"),e)try{let t;try{t=await v.getUserProfile(e.uid)}catch(He){console.warn("Error fetching user profile, using mock data:",He),t={id:"mock-id",uid:e.uid,email:e.email||"test@example.com",userType:"user",createdAt:new Date,lastLoginAt:new Date}}n(t),console.log("User profile loaded:",t.email),await s.default.setItem(S,JSON.stringify(t))}catch(He){console.error("Error in auth state change handler:",He),n(null),await s.default.removeItem(S)}else console.log("No user found, clearing user state"),n(null),await s.default.removeItem(S);r(!1)}));return()=>{console.log("Cleaning up auth state listener"),e()}}),[]);return(0,C.jsx)(B.Provider,{value:{user:t,loading:o,signIn:async(e,t)=>{console.log("Attempting to sign in:",e),r(!0);try{if(await v.signIn(e,t),console.log("Sign in successful"),p()){console.log("Development mode: Creating mock user");const t={id:"mock-id",uid:"mock-uid",email:e,userType:"user",createdAt:new Date,lastLoginAt:new Date};n(t),await s.default.setItem(S,JSON.stringify(t))}try{w({index:0,routes:[{name:"Main"}]})}catch(o){console.warn("Navigation error:",o)}}catch(He){if(console.error("Error signing in:",He),!p())throw He;{console.log("Development mode: Creating mock user");const t={id:"mock-id",uid:"mock-uid",email:e,userType:"user",createdAt:new Date,lastLoginAt:new Date};n(t),await s.default.setItem(S,JSON.stringify(t))}}finally{r(!1)}},signUp:async(e,t,o)=>{console.log("Attempting to sign up:",e,"as",o),r(!0);try{if(await v.signUp(e,t,o),console.log("Sign up successful"),p()){console.log("Development mode: Creating mock user");const t={id:"mock-id",uid:"mock-uid",email:e,userType:o,createdAt:new Date,lastLoginAt:new Date};n(t),await s.default.setItem(S,JSON.stringify(t))}try{w({index:0,routes:[{name:"Main"}]})}catch(a){console.warn("Navigation error:",a)}}catch(He){if(console.error("Error signing up:",He),!p())throw He;{console.log("Development mode: Creating mock user");const t={id:"mock-id",uid:"mock-uid",email:e,userType:o,createdAt:new Date,lastLoginAt:new Date};n(t),await s.default.setItem(S,JSON.stringify(t))}}finally{r(!1)}},signOut:async()=>{console.log("Attempting to sign out"),r(!0);try{await v.signOut(),await s.default.removeItem(S),n(null),console.log("Sign out successful");try{w({index:0,routes:[{name:"Auth"}]})}catch(e){console.warn("Navigation error:",e),b("Auth")}}catch(He){console.error("Error signing out:",He),await s.default.removeItem(S),n(null);try{w({index:0,routes:[{name:"Auth"}]})}catch(e){console.warn("Navigation error:",e),b("Auth")}}finally{r(!1)}},updateProfile:async e=>{if(!t)throw new Error("No user logged in");console.log("Updating user profile:",e),r(!0);try{await v.updateUserProfile(t.id,e);const o=Object.assign({},t,e);n(o),await s.default.setItem(S,JSON.stringify(o)),console.log("Profile update successful")}catch(He){if(console.error("Error updating profile:",He),!p())throw He;{const o=Object.assign({},t,e);n(o),await s.default.setItem(S,JSON.stringify(o))}}finally{r(!1)}}},children:e})},E=()=>{const e=(0,l.useContext)(B);if(void 0===e)throw new Error("useAuth must be used within an AuthProvider");return e};var I=n(47032),D=n(15248),k=n(12849),z=n(73929),P=n(6283),A=n(16773),R=n(15648),L=n(73668),U=n(51690),V=n(20530),N=n(56933);const W=L.default.create({container:{flex:1,backgroundColor:"#121212"},overlay:{flex:1,backgroundColor:"rgba(0,0,0,0.6)",padding:20,justifyContent:"center"},logoContainer:{alignItems:"center",marginBottom:40},title:{fontSize:48,fontWeight:"bold",color:"#FFFFFF",textShadowColor:"rgba(0,0,0,0.5)",textShadowOffset:{width:1,height:1},textShadowRadius:10,marginBottom:10},titleRed:{color:"#FF3B30"},tagline:{fontSize:18,color:"#FFFFFF",opacity:.8},formContainer:{backgroundColor:"rgba(30, 30, 30, 0.8)",borderRadius:15,padding:25,shadowColor:"#000",shadowOffset:{width:0,height:4},shadowOpacity:.3,shadowRadius:10},inputContainer:{flexDirection:"row",alignItems:"center",backgroundColor:"rgba(0, 0, 0, 0.3)",borderRadius:10,marginBottom:16,borderWidth:1,borderColor:"rgba(255, 255, 255, 0.1)"},inputIcon:{padding:15},input:{flex:1,height:55,color:"#FFFFFF",fontSize:16},button:{flexDirection:"row",backgroundColor:"#FF3B30",height:55,borderRadius:10,justifyContent:"center",alignItems:"center",marginTop:10,marginBottom:20},buttonText:{color:"white",fontSize:18,fontWeight:"bold"},buttonIcon:{marginLeft:10},signupButton:{alignItems:"center"},signupText:{color:"#BBBBBB",fontSize:16},signupTextBold:{color:"#FFFFFF",fontWeight:"bold"}}),O=({navigation:e})=>{const{signIn:t}=E(),[n,o]=(0,l.useState)(""),[r,a]=(0,l.useState)(""),[i,s]=(0,l.useState)(!1);return(0,C.jsx)(N.default,{source:{uri:"https://images.unsplash.com/photo-1571204829887-3b8d69e23af5?ixlib=rb-1.2.1&auto=format&fit=crop&w=1350&q=80"},style:W.container,children:(0,C.jsxs)(z.default,{style:W.overlay,children:[(0,C.jsxs)(z.default,{style:W.logoContainer,children:[(0,C.jsxs)(P.default,{style:W.title,children:[(0,C.jsx)(P.default,{style:W.titleRed,children:"Yo"}),"Vibe"]}),(0,C.jsx)(P.default,{style:W.tagline,children:"Find Your Perfect Night Out"})]}),(0,C.jsxs)(z.default,{style:W.formContainer,children:[(0,C.jsxs)(z.default,{style:W.inputContainer,children:[(0,C.jsx)(k.default,{name:"mail-outline",size:22,color:"#FFFFFF",style:W.inputIcon}),(0,C.jsx)(A.default,{style:W.input,placeholder:"Email",placeholderTextColor:"#999",value:n,onChangeText:o,autoCapitalize:"none",keyboardType:"email-address"})]}),(0,C.jsxs)(z.default,{style:W.inputContainer,children:[(0,C.jsx)(k.default,{name:"lock-closed-outline",size:22,color:"#FFFFFF",style:W.inputIcon}),(0,C.jsx)(A.default,{style:W.input,placeholder:"Password",placeholderTextColor:"#999",value:r,onChangeText:a,secureTextEntry:!0})]}),(0,C.jsx)(R.default,{style:W.button,onPress:async()=>{if(n&&r){s(!0);try{console.log("Login attempt with:",n),await t(n,r),console.log("Login successful"),e.reset({index:0,routes:[{name:"Main"}]})}catch(He){console.error("Login failed:",He),U.default.alert("Login Failed",He instanceof Error?He.message:"Failed to login")}finally{s(!1)}}else U.default.alert("Error","Please enter both email and password")},disabled:i,children:i?(0,C.jsx)(V.default,{color:"#FFFFFF"}):(0,C.jsxs)(C.Fragment,{children:[(0,C.jsx)(P.default,{style:W.buttonText,children:"Login"}),(0,C.jsx)(k.default,{name:"arrow-forward",size:20,color:"#FFFFFF",style:W.buttonIcon})]})}),(0,C.jsx)(R.default,{onPress:()=>e.navigate("SignUp"),style:W.signupButton,children:(0,C.jsxs)(P.default,{style:W.signupText,children:["Don't have an account? ",(0,C.jsx)(P.default,{style:W.signupTextBold,children:"Sign up"})]})})]})]})})};var M=n(2772);const H=L.default.create({scrollView:{flexGrow:1},container:{flex:1,backgroundColor:"#121212"},overlay:{flex:1,backgroundColor:"rgba(0,0,0,0.6)",padding:20,justifyContent:"center"},headerContainer:{alignItems:"center",marginBottom:30,position:"relative"},title:{fontSize:36,fontWeight:"bold",color:"#FFFFFF",textShadowColor:"rgba(0,0,0,0.5)",textShadowOffset:{width:1,height:1},textShadowRadius:10,marginBottom:5},subtitle:{fontSize:16,color:"#BBBBBB"},adminDotsContainer:{flexDirection:"row",justifyContent:"center",width:20,marginBottom:5},adminDot:{width:4,height:4,borderRadius:2,backgroundColor:"rgba(255, 255, 255, 0.1)",marginHorizontal:2},formContainer:{backgroundColor:"rgba(30, 30, 30, 0.8)",borderRadius:15,padding:25,shadowColor:"#000",shadowOffset:{width:0,height:4},shadowOpacity:.3,shadowRadius:10},inputContainer:{flexDirection:"row",alignItems:"center",backgroundColor:"rgba(0, 0, 0, 0.3)",borderRadius:10,marginBottom:16,borderWidth:1,borderColor:"rgba(255, 255, 255, 0.1)"},inputIcon:{padding:15},input:{flex:1,height:55,color:"#FFFFFF",fontSize:16},accountTypeLabel:{color:"#FFFFFF",fontSize:16,marginBottom:10},buttonGroup:{flexDirection:"row",justifyContent:"space-between",marginBottom:20},typeButton:{flex:1,flexDirection:"row",alignItems:"center",justifyContent:"center",padding:12,borderWidth:1,borderColor:"rgba(255, 255, 255, 0.2)",borderRadius:10,marginHorizontal:5,backgroundColor:"rgba(0, 0, 0, 0.3)"},selectedButton:{backgroundColor:"#FF3B30",borderColor:"#FF3B30"},typeButtonText:{color:"#BBBBBB",fontSize:14,marginLeft:5},selectedButtonText:{color:"#FFFFFF",fontWeight:"bold"},button:{flexDirection:"row",backgroundColor:"#FF3B30",height:55,borderRadius:10,justifyContent:"center",alignItems:"center",marginTop:10,marginBottom:20},buttonText:{color:"white",fontSize:18,fontWeight:"bold"},buttonIcon:{marginLeft:10},loginButton:{alignItems:"center"},loginText:{color:"#BBBBBB",fontSize:16},loginTextBold:{color:"#FFFFFF",fontWeight:"bold"}}),q=({navigation:e})=>{const{signUp:t}=E(),[n,o]=(0,l.useState)(""),[r,a]=(0,l.useState)(""),[i,s]=(0,l.useState)("user"),[d,c]=(0,l.useState)(!1),[u,g]=(0,l.useState)(0);return(0,C.jsx)(M.default,{contentContainerStyle:H.scrollView,children:(0,C.jsx)(N.default,{source:{uri:"https://images.unsplash.com/photo-1470229722913-7c0e2dbbafd3?ixlib=rb-1.2.1&auto=format&fit=crop&w=1350&q=80"},style:H.container,children:(0,C.jsxs)(z.default,{style:H.overlay,children:[(0,C.jsxs)(z.default,{style:H.headerContainer,children:[(0,C.jsx)(P.default,{style:H.title,children:"Create Account"}),(0,C.jsxs)(R.default,{onPress:()=>{const e=u+1;g(e),5===e&&(s("admin"),U.default.alert("Admin Mode","Admin account type selected"))},style:H.adminDotsContainer,children:[(0,C.jsx)(z.default,{style:H.adminDot}),(0,C.jsx)(z.default,{style:H.adminDot})]}),(0,C.jsx)(P.default,{style:H.subtitle,children:"Join the nightlife community"})]}),(0,C.jsxs)(z.default,{style:H.formContainer,children:[(0,C.jsxs)(z.default,{style:H.inputContainer,children:[(0,C.jsx)(k.default,{name:"mail-outline",size:22,color:"#FFFFFF",style:H.inputIcon}),(0,C.jsx)(A.default,{style:H.input,placeholder:"Email",placeholderTextColor:"#999",value:n,onChangeText:o,autoCapitalize:"none",keyboardType:"email-address"})]}),(0,C.jsxs)(z.default,{style:H.inputContainer,children:[(0,C.jsx)(k.default,{name:"lock-closed-outline",size:22,color:"#FFFFFF",style:H.inputIcon}),(0,C.jsx)(A.default,{style:H.input,placeholder:"Password",placeholderTextColor:"#999",value:r,onChangeText:a,secureTextEntry:!0})]}),(0,C.jsx)(P.default,{style:H.accountTypeLabel,children:"Account Type:"}),(0,C.jsxs)(z.default,{style:H.buttonGroup,children:[(0,C.jsxs)(R.default,{style:[H.typeButton,"user"===i&&H.selectedButton],onPress:()=>s("user"),children:[(0,C.jsx)(k.default,{name:"person",size:20,color:"user"===i?"#FFFFFF":"#BBBBBB"}),(0,C.jsx)(P.default,{style:[H.typeButtonText,"user"===i&&H.selectedButtonText],children:"Regular User"})]}),(0,C.jsxs)(R.default,{style:[H.typeButton,"club_owner"===i&&H.selectedButton],onPress:()=>s("club_owner"),children:[(0,C.jsx)(k.default,{name:"business",size:20,color:"club_owner"===i?"#FFFFFF":"#BBBBBB"}),(0,C.jsx)(P.default,{style:[H.typeButtonText,"club_owner"===i&&H.selectedButtonText],children:"Club Owner"})]})]}),(0,C.jsx)(R.default,{style:H.button,onPress:async()=>{if(n&&r)if(r.length<6)U.default.alert("Error","Password must be at least 6 characters");else{c(!0);try{console.log("Sign up attempt with:",n,"as",i),await t(n,r,i),console.log("Sign up successful"),e.reset({index:0,routes:[{name:"Main"}]})}catch(He){console.error("Sign up failed:",He),U.default.alert("Sign Up Failed",He instanceof Error?He.message:"Failed to create account")}finally{c(!1)}}else U.default.alert("Error","Please enter both email and password")},disabled:d,children:d?(0,C.jsx)(V.default,{color:"#FFFFFF"}):(0,C.jsxs)(C.Fragment,{children:[(0,C.jsx)(P.default,{style:H.buttonText,children:"Sign Up"}),(0,C.jsx)(k.default,{name:"arrow-forward",size:20,color:"#FFFFFF",style:H.buttonIcon})]})}),(0,C.jsx)(R.default,{onPress:()=>e.navigate("Login"),style:H.loginButton,children:(0,C.jsxs)(P.default,{style:H.loginText,children:["Already have an account? ",(0,C.jsx)(P.default,{style:H.loginTextBold,children:"Login"})]})})]})]})})})};var $=n(90932);const _=L.default.create({container:{flex:1,backgroundColor:"#121212",padding:16},header:{fontSize:24,fontWeight:"bold",color:"#FFFFFF",marginBottom:16},loadingContainer:{flex:1,justifyContent:"center",alignItems:"center"},loadingText:{color:"#FFFFFF",marginTop:16},emptyContainer:{flex:1,justifyContent:"center",alignItems:"center"},emptyText:{color:"#FFFFFF",fontSize:18,fontWeight:"bold"},emptySubtext:{color:"#999999",fontSize:14,marginTop:8},venueCard:{height:200,marginBottom:16,borderRadius:12,overflow:"hidden"},venueImage:{flex:1,justifyContent:"space-between"},venueGradient:{flex:1,justifyContent:"flex-end",padding:16,backgroundColor:"rgba(0,0,0,0.4)"},venueName:{fontSize:24,fontWeight:"bold",color:"white"},venueInfo:{fontSize:16,color:"rgba(255,255,255,0.8)",marginTop:4}}),J=({navigation:e})=>{const[t,n]=(0,l.useState)([]),[o,r]=(0,l.useState)(!0);(0,l.useEffect)((()=>e.addListener("focus",(()=>{a()}))),[e]);const a=async()=>{try{r(!0);const e=await v.getVenues();n(e)}catch(He){console.error("Error loading venues:",He)}finally{r(!1)}};return(0,C.jsxs)(z.default,{style:_.container,children:[(0,C.jsx)(P.default,{style:_.header,children:"Night Clubs & Bars"}),o?(0,C.jsxs)(z.default,{style:_.loadingContainer,children:[(0,C.jsx)(V.default,{size:"large",color:"#2196F3"}),(0,C.jsx)(P.default,{style:_.loadingText,children:"Loading venues..."})]}):0===t.length?(0,C.jsxs)(z.default,{style:_.emptyContainer,children:[(0,C.jsx)(P.default,{style:_.emptyText,children:"No venues found"}),(0,C.jsx)(P.default,{style:_.emptySubtext,children:"Check back later for new venues"})]}):(0,C.jsx)($.default,{data:t,keyExtractor:e=>e.id,renderItem:({item:t})=>(0,C.jsx)(R.default,{style:_.venueCard,onPress:()=>{return n=t.id,void e.navigate("VenueDetail",{venueId:n});var n},children:(0,C.jsx)(N.default,{source:{uri:t.backgroundImageUrl},style:_.venueImage,resizeMode:"cover",children:(0,C.jsxs)(z.default,{style:_.venueGradient,children:[(0,C.jsx)(P.default,{style:_.venueName,children:t.name}),(0,C.jsxs)(P.default,{style:_.venueInfo,children:[t.categories.join(", ")," \u2022 Vibe Rating: ",t.vibeRating.toFixed(1),"\u2b50\ufe0f"]})]})})})})]})};var G=n(40484);const Y=L.default.create({container:{flex:1,backgroundColor:"#121212"},loadingContainer:{flex:1,justifyContent:"center",alignItems:"center",backgroundColor:"#121212"},loadingText:{color:"#FFFFFF",fontSize:16},headerImage:{width:"100%",height:200},contentContainer:{padding:16},venueName:{fontSize:28,fontWeight:"bold",color:"#FFFFFF",marginBottom:4},venueLocation:{fontSize:16,color:"#BBBBBB",marginBottom:12},ratingContainer:{flexDirection:"row",justifyContent:"space-between",alignItems:"center",marginBottom:16},ratingText:{fontSize:16,color:"#FFFFFF"},categoriesContainer:{flexDirection:"row"},categoryTag:{backgroundColor:"#2196F3",paddingHorizontal:8,paddingVertical:4,borderRadius:4,marginLeft:8},categoryText:{color:"#FFFFFF",fontSize:12},actionButtonsContainer:{flexDirection:"row",flexWrap:"wrap",marginVertical:16},actionButton:{flexDirection:"row",alignItems:"center",backgroundColor:"#2196F3",paddingHorizontal:12,paddingVertical:8,borderRadius:4,marginRight:8,marginBottom:8},deleteButton:{backgroundColor:"#FF3B30"},actionButtonText:{color:"#FFFFFF",marginLeft:8},sectionTitle:{fontSize:20,fontWeight:"bold",color:"#FFFFFF",marginTop:16,marginBottom:8},description:{fontSize:16,color:"#DDDDDD",lineHeight:24},imagesContainer:{flexDirection:"row",marginVertical:12},todayImage:{width:150,height:150,borderRadius:8,marginRight:12},programContainer:{marginTop:8},programItem:{flexDirection:"row",paddingVertical:8,borderBottomWidth:1,borderBottomColor:"#333"},programDay:{width:100,fontSize:16,fontWeight:"bold",color:"#FFFFFF"},programDescription:{flex:1,fontSize:16,color:"#DDDDDD"},eventCard:{flexDirection:"row",backgroundColor:"#1E1E1E",borderRadius:8,overflow:"hidden",marginBottom:12},eventImage:{width:80,height:80},eventInfo:{flex:1,padding:12},eventName:{fontSize:16,fontWeight:"bold",color:"#FFFFFF"},eventDate:{fontSize:14,color:"#BBBBBB",marginTop:4},eventArtists:{fontSize:14,color:"#2196F3",marginTop:4},directionsButton:{flexDirection:"row",alignItems:"center",justifyContent:"center",backgroundColor:"#2196F3",paddingVertical:12,borderRadius:8,marginTop:24},directionsButtonText:{color:"#FFFFFF",fontSize:16,fontWeight:"bold",marginLeft:8}}),X=({route:e,navigation:t})=>{const{venueId:n}=e.params,{user:o}=E(),[r,a]=(0,l.useState)(null),[i,s]=(0,l.useState)([]),[d,c]=(0,l.useState)(!0),[u,g]=(0,l.useState)(!1),[f,m]=(0,l.useState)(!1);(0,l.useEffect)((()=>{(async()=>{try{const e=await v.getVenueById(n);if(a(e),o&&(g(e?.ownerId===o.id),m("admin"===o.userType)),e){const e=await v.getEventsByVenue(n);s(e)}}catch(He){console.error("Error loading venue details:",He)}finally{c(!1)}})()}),[n,o]);return d?(0,C.jsx)(z.default,{style:Y.loadingContainer,children:(0,C.jsx)(P.default,{style:Y.loadingText,children:"Loading venue details..."})}):r?(0,C.jsxs)(M.default,{style:Y.container,children:[(0,C.jsx)(G.default,{source:{uri:r.backgroundImageUrl},style:Y.headerImage}),(0,C.jsxs)(z.default,{style:Y.contentContainer,children:[(0,C.jsx)(P.default,{style:Y.venueName,children:r.name}),(0,C.jsx)(P.default,{style:Y.venueLocation,children:r.location}),(0,C.jsxs)(z.default,{style:Y.ratingContainer,children:[(0,C.jsxs)(P.default,{style:Y.ratingText,children:["Vibe Rating: ",r.vibeRating.toFixed(1),"\u2b50\ufe0f"]}),(0,C.jsx)(z.default,{style:Y.categoriesContainer,children:r.categories.map(((e,t)=>(0,C.jsx)(z.default,{style:Y.categoryTag,children:(0,C.jsx)(P.default,{style:Y.categoryText,children:e})},t)))})]}),(u||f)&&(0,C.jsxs)(z.default,{style:Y.actionButtonsContainer,children:[u&&(0,C.jsxs)(C.Fragment,{children:[(0,C.jsxs)(R.default,{style:Y.actionButton,onPress:()=>{t.navigate("ManagePrograms",{venueId:n,weeklyPrograms:r?.weeklyPrograms||{}})},children:[(0,C.jsx)(k.default,{name:"calendar-outline",size:20,color:"#FFFFFF"}),(0,C.jsx)(P.default,{style:Y.actionButtonText,children:"Manage Programs"})]}),(0,C.jsxs)(R.default,{style:Y.actionButton,onPress:()=>{t.navigate("AddEvent",{venueId:n,venueName:r?.name||""})},children:[(0,C.jsx)(k.default,{name:"add-circle-outline",size:20,color:"#FFFFFF"}),(0,C.jsx)(P.default,{style:Y.actionButtonText,children:"Add Event"})]})]}),f&&(0,C.jsxs)(R.default,{style:[Y.actionButton,Y.deleteButton],onPress:async()=>{U.default.alert("Delete Venue","Are you sure you want to delete this venue? This action cannot be undone.",[{text:"Cancel",style:"cancel"},{text:"Delete",style:"destructive",onPress:async()=>{try{c(!0),await v.deleteEventsByVenue(n),await v.deleteVenue(n),U.default.alert("Success","Venue and associated events deleted successfully"),t.goBack()}catch(He){console.error("Error deleting venue:",He),U.default.alert("Error","Failed to delete venue"),c(!1)}}}])},children:[(0,C.jsx)(k.default,{name:"trash-outline",size:20,color:"#FFFFFF"}),(0,C.jsx)(P.default,{style:Y.actionButtonText,children:"Delete Venue"})]})]}),(0,C.jsx)(P.default,{style:Y.sectionTitle,children:"About"}),(0,C.jsx)(P.default,{style:Y.description,children:r.description}),r.todayImages&&r.todayImages.length>0&&(0,C.jsxs)(C.Fragment,{children:[(0,C.jsxs)(P.default,{style:Y.sectionTitle,children:["Today at ",r.name]}),(0,C.jsx)(M.default,{horizontal:!0,showsHorizontalScrollIndicator:!1,style:Y.imagesContainer,children:r.todayImages.map(((e,t)=>(0,C.jsx)(G.default,{source:{uri:e},style:Y.todayImage},t)))})]}),r.weeklyPrograms&&Object.keys(r.weeklyPrograms).length>0&&(0,C.jsxs)(C.Fragment,{children:[(0,C.jsx)(P.default,{style:Y.sectionTitle,children:"Weekly Program"}),(0,C.jsx)(z.default,{style:Y.programContainer,children:Object.entries(r.weeklyPrograms).map((([e,t])=>(0,C.jsxs)(z.default,{style:Y.programItem,children:[(0,C.jsx)(P.default,{style:Y.programDay,children:e}),(0,C.jsx)(P.default,{style:Y.programDescription,children:t})]},e)))})]}),i.length>0&&(0,C.jsxs)(C.Fragment,{children:[(0,C.jsx)(P.default,{style:Y.sectionTitle,children:"Upcoming Events"}),i.map((e=>(0,C.jsxs)(R.default,{style:Y.eventCard,onPress:()=>{t.navigate("EventDetail",{eventId:e.id})},children:[(0,C.jsx)(G.default,{source:{uri:e.posterImageUrl},style:Y.eventImage}),(0,C.jsxs)(z.default,{style:Y.eventInfo,children:[(0,C.jsx)(P.default,{style:Y.eventName,children:e.name}),(0,C.jsx)(P.default,{style:Y.eventDate,children:e.date.toDateString()}),(0,C.jsx)(P.default,{style:Y.eventArtists,children:e.artists.join(", ")})]})]},e.id)))]}),(0,C.jsxs)(R.default,{style:Y.directionsButton,onPress:()=>{t.navigate("Map",{screen:"MapView",params:{destinationVenueId:n}})},children:[(0,C.jsx)(k.default,{name:"navigate-outline",size:20,color:"#FFFFFF"}),(0,C.jsx)(P.default,{style:Y.directionsButtonText,children:"Get Directions"})]})]})]}):(0,C.jsx)(z.default,{style:Y.loadingContainer,children:(0,C.jsx)(P.default,{style:Y.loadingText,children:"Venue not found"})})},K=L.default.create({container:{flex:1,backgroundColor:"#121212"},header:{flexDirection:"row",justifyContent:"space-between",alignItems:"center",padding:16,paddingTop:16,backgroundColor:"#121212"},headerTitle:{fontSize:24,fontWeight:"bold",color:"#FFFFFF"},searchButton:{padding:8},addEventButton:{flexDirection:"row",alignItems:"center",backgroundColor:"#2196F3",padding:12,borderRadius:8,marginHorizontal:16,marginBottom:16,justifyContent:"center"},addEventButtonText:{color:"#FFFFFF",fontWeight:"bold",marginLeft:8},loadingContainer:{flex:1,justifyContent:"center",alignItems:"center"},loadingText:{color:"#FFFFFF",marginTop:16},emptyContainer:{flex:1,justifyContent:"center",alignItems:"center"},emptyText:{color:"#FFFFFF",fontSize:18,fontWeight:"bold",textAlign:"center"},emptySubtext:{color:"#999999",fontSize:14,marginTop:8,textAlign:"center"},eventsList:{paddingBottom:16},eventCard:{marginBottom:1,height:200},eventImage:{width:"100%",height:"100%"},eventOverlay:{flex:1,backgroundColor:"rgba(0,0,0,0.3)",justifyContent:"flex-end",padding:16},eventName:{fontSize:24,fontWeight:"bold",color:"#FFFFFF",marginBottom:4,textShadowColor:"rgba(0,0,0,0.75)",textShadowOffset:{width:1,height:1},textShadowRadius:3},eventDetails:{flexDirection:"row",justifyContent:"space-between",alignItems:"center"},eventLocation:{fontSize:14,color:"#FFFFFF",textShadowColor:"rgba(0,0,0,0.75)",textShadowOffset:{width:1,height:1},textShadowRadius:3},eventMeta:{flexDirection:"row",alignItems:"center"},attendeeCount:{flexDirection:"row",alignItems:"center",marginRight:8},attendeeCountText:{color:"#FFFFFF",fontSize:12,marginLeft:4},entryFee:{color:"#FFD700",fontWeight:"bold",fontSize:14,textShadowColor:"rgba(0,0,0,0.75)",textShadowOffset:{width:1,height:1},textShadowRadius:3}}),Q=({navigation:e})=>{const{user:t}=E(),[n,o]=(0,l.useState)([]),[r,a]=(0,l.useState)([]),[i,s]=(0,l.useState)(!0);(0,l.useEffect)((()=>e.addListener("focus",(()=>{d()}))),[e]);const d=async()=>{try{s(!0),await v.deletePastEvents();const e=[...await v.getEvents()].sort(((e,t)=>{const n=new Date;return Math.abs(e.date.getTime()-n.getTime())-Math.abs(t.date.getTime()-n.getTime())}));o(e);const t=[...await v.getFeaturedEvents()].sort(((e,t)=>{const n=new Date;return Math.abs(e.date.getTime()-n.getTime())-Math.abs(t.date.getTime()-n.getTime())}));a(t)}catch(He){console.error("Error loading events:",He)}finally{s(!1)}},c=e=>{const t=e.toLocaleDateString("en-US",{month:"short",day:"numeric"}).toUpperCase();return`${e.toLocaleDateString("en-US",{weekday:"short"}).toUpperCase()} ${t}`},u=e=>e.attendees?e.attendees.length:0;return(0,C.jsxs)(z.default,{style:K.container,children:[(0,C.jsxs)(z.default,{style:K.header,children:[(0,C.jsx)(P.default,{style:K.headerTitle,children:"Upcoming Events"}),(0,C.jsx)(R.default,{style:K.searchButton,children:(0,C.jsx)(k.default,{name:"search",size:24,color:"#FFFFFF"})})]}),t&&("user"===t.userType||"admin"===t.userType)&&(0,C.jsxs)(R.default,{style:K.addEventButton,onPress:()=>{e.navigate("AddEvent")},children:[(0,C.jsx)(k.default,{name:"add-circle-outline",size:20,color:"#FFFFFF"}),(0,C.jsx)(P.default,{style:K.addEventButtonText,children:"Add New Event"})]}),i?(0,C.jsxs)(z.default,{style:K.loadingContainer,children:[(0,C.jsx)(V.default,{size:"large",color:"#2196F3"}),(0,C.jsx)(P.default,{style:K.loadingText,children:"Loading events..."})]}):0===n.length?(0,C.jsxs)(z.default,{style:K.emptyContainer,children:[(0,C.jsx)(P.default,{style:K.emptyText,children:"No events found"}),(0,C.jsx)(P.default,{style:K.emptySubtext,children:"Check back later for upcoming events"})]}):(0,C.jsx)($.default,{data:n,keyExtractor:e=>e.id,renderItem:({item:t})=>(0,C.jsx)(R.default,{style:K.eventCard,onPress:()=>{return n=t.id,void e.navigate("EventDetail",{eventId:n});var n},children:(0,C.jsx)(N.default,{source:{uri:t.posterImageUrl},style:K.eventImage,children:(0,C.jsxs)(z.default,{style:K.eventOverlay,children:[(0,C.jsx)(P.default,{style:K.eventName,children:t.name}),(0,C.jsxs)(z.default,{style:K.eventDetails,children:[(0,C.jsxs)(P.default,{style:K.eventLocation,children:[t.location||t.venueName.split(" ")[0]," \u2022 ",c(t.date)]}),(0,C.jsxs)(z.default,{style:K.eventMeta,children:[u(t)>0&&(0,C.jsxs)(z.default,{style:K.attendeeCount,children:[(0,C.jsx)(k.default,{name:"people",size:14,color:"#FFFFFF"}),(0,C.jsx)(P.default,{style:K.attendeeCountText,children:u(t)})]}),(0,C.jsx)(P.default,{style:K.entryFee,children:t.entryFee||"Free Entry"})]})]})]})})}),ListEmptyComponent:(0,C.jsx)(P.default,{style:K.emptyText,children:"No upcoming events found"}),contentContainerStyle:K.eventsList})]})};var Z=n(68703);const ee=L.default.create({container:{flex:1,backgroundColor:"#121212"},loadingContainer:{flex:1,justifyContent:"center",alignItems:"center",backgroundColor:"#121212"},loadingText:{color:"#FFFFFF",fontSize:16},headerImage:{width:"100%",height:300},headerOverlay:{flex:1,backgroundColor:"rgba(0,0,0,0.4)",justifyContent:"space-between",padding:16,paddingTop:16},backButton:{width:40,height:40,borderRadius:20,backgroundColor:"rgba(0,0,0,0.5)",justifyContent:"center",alignItems:"center"},eventHeaderInfo:{marginBottom:16},eventName:{fontSize:28,fontWeight:"bold",color:"#FFFFFF",marginBottom:8,textShadowColor:"rgba(0,0,0,0.75)",textShadowOffset:{width:1,height:1},textShadowRadius:3},eventLocation:{fontSize:16,color:"#FFFFFF",marginBottom:8,textShadowColor:"rgba(0,0,0,0.75)",textShadowOffset:{width:1,height:1},textShadowRadius:3},eventMeta:{flexDirection:"row",alignItems:"center"},attendeeCount:{flexDirection:"row",alignItems:"center",marginRight:12},attendeeCountText:{color:"#FFFFFF",fontSize:14,marginLeft:6,textShadowColor:"rgba(0,0,0,0.75)",textShadowOffset:{width:1,height:1},textShadowRadius:3},entryFee:{color:"#FFD700",fontWeight:"bold",fontSize:16,textShadowColor:"rgba(0,0,0,0.75)",textShadowOffset:{width:1,height:1},textShadowRadius:3},contentContainer:{padding:16},actionButtons:{flexDirection:"row",marginBottom:20},actionButton:{flexDirection:"row",alignItems:"center",justifyContent:"center",backgroundColor:"#1E1E1E",paddingVertical:12,paddingHorizontal:20,borderRadius:8,marginRight:12,flex:1},goingButton:{backgroundColor:"#2196F3"},actionButtonText:{color:"#2196F3",fontWeight:"bold",marginLeft:8},goingButtonText:{color:"#FFFFFF"},venueContainer:{flexDirection:"row",alignItems:"center",marginBottom:8},venueName:{fontSize:16,color:"#2196F3",marginLeft:8},dateContainer:{flexDirection:"row",alignItems:"center",marginBottom:16},dateText:{fontSize:16,color:"#FFFFFF",marginLeft:8},sectionTitle:{fontSize:20,fontWeight:"bold",color:"#FFFFFF",marginTop:16,marginBottom:8},description:{fontSize:16,color:"#DDDDDD",lineHeight:24},artistsContainer:{flexDirection:"row",flexWrap:"wrap",marginTop:8},artistTag:{backgroundColor:"#2196F3",paddingHorizontal:12,paddingVertical:6,borderRadius:20,marginRight:8,marginBottom:8},artistText:{color:"#FFFFFF",fontSize:14},button:{backgroundColor:"#2196F3",height:50,borderRadius:8,justifyContent:"center",alignItems:"center",marginTop:24},buttonText:{color:"white",fontSize:16,fontWeight:"bold"},deleteButton:{flexDirection:"row",alignItems:"center",justifyContent:"center",backgroundColor:"#FF3B30",paddingVertical:12,paddingHorizontal:20,borderRadius:8,marginTop:16},deleteButtonText:{color:"#FFFFFF",fontWeight:"bold",marginLeft:8}}),te=({route:e,navigation:t})=>{const{eventId:n}=e.params,{user:o}=E(),[r,a]=(0,l.useState)(null),[i,s]=(0,l.useState)(!0),[d,c]=(0,l.useState)(!1),[u,g]=(0,l.useState)(0);(0,l.useEffect)((()=>{(async()=>{try{const e=await v.getEventById(n);a(e),o&&e?.attendees&&c(e.attendees.includes(o.id)),g(e?.attendees?.length||0)}catch(He){console.error("Error loading event details:",He)}finally{s(!1)}})()}),[n,o]);return i?(0,C.jsx)(z.default,{style:ee.loadingContainer,children:(0,C.jsx)(P.default,{style:ee.loadingText,children:"Loading event details..."})}):r?(0,C.jsxs)(M.default,{style:ee.container,children:[(0,C.jsx)(N.default,{source:{uri:r.posterImageUrl},style:ee.headerImage,children:(0,C.jsxs)(z.default,{style:ee.headerOverlay,children:[(0,C.jsx)(R.default,{style:ee.backButton,onPress:()=>t.goBack(),children:(0,C.jsx)(k.default,{name:"arrow-back",size:24,color:"#FFFFFF"})}),(0,C.jsxs)(z.default,{style:ee.eventHeaderInfo,children:[(0,C.jsx)(P.default,{style:ee.eventName,children:r.name}),(0,C.jsxs)(P.default,{style:ee.eventLocation,children:[r.location||r.venueName.toUpperCase()," \u2022 ",(f=r.date,f.toLocaleDateString("en-US",{weekday:"short",month:"short",day:"numeric"}).toUpperCase())]}),(0,C.jsxs)(z.default,{style:ee.eventMeta,children:[u>0&&(0,C.jsxs)(z.default,{style:ee.attendeeCount,children:[(0,C.jsx)(k.default,{name:"people",size:16,color:"#FFFFFF"}),(0,C.jsxs)(P.default,{style:ee.attendeeCountText,children:[u," going"]})]}),(0,C.jsx)(P.default,{style:ee.entryFee,children:r.entryFee})]})]})]})}),(0,C.jsxs)(z.default,{style:ee.contentContainer,children:[(0,C.jsxs)(z.default,{style:ee.actionButtons,children:[(0,C.jsxs)(R.default,{style:[ee.actionButton,d&&ee.goingButton],onPress:async()=>{if(o){if(r)try{const e=!d;c(e),g((t=>e?t+1:t-1));const t=e?[...r.attendees||[],o.id]:(r.attendees||[]).filter((e=>e!==o.id));await v.updateEvent(r.id,{attendees:t}),a(Object.assign({},r,{attendees:t}))}catch(He){console.error("Error updating attendance:",He),c(!d),g(r.attendees?.length||0),U.default.alert("Error","Failed to update attendance status")}}else U.default.alert("Sign In Required","Please sign in to mark yourself as attending this event.")},children:[(0,C.jsx)(k.default,{name:d?"checkmark-circle":"calendar-outline",size:20,color:d?"#FFFFFF":"#2196F3"}),(0,C.jsx)(P.default,{style:[ee.actionButtonText,d&&ee.goingButtonText],children:"I'm Going"})]}),(0,C.jsxs)(R.default,{style:ee.actionButton,onPress:async()=>{if(r)try{const e=await Z.default.share({title:r.name,message:`Check out ${r.name} at ${r.venueName} on ${r.date.toDateString()}! ${r.description}`,url:r.posterImageUrl});e.action===Z.default.sharedAction?e.activityType?console.log(`Shared via ${e.activityType}`):console.log("Shared successfully"):e.action===Z.default.dismissedAction&&console.log("Share dismissed")}catch(He){console.error("Error sharing event:",He),U.default.alert("Error","Failed to share event")}},children:[(0,C.jsx)(k.default,{name:"share-social-outline",size:20,color:"#2196F3"}),(0,C.jsx)(P.default,{style:ee.actionButtonText,children:"Share"})]})]}),"admin"===o?.userType&&(0,C.jsxs)(R.default,{style:ee.deleteButton,onPress:()=>{U.default.alert("Delete Event","Are you sure you want to delete this event? This action cannot be undone.",[{text:"Cancel",style:"cancel"},{text:"Delete",style:"destructive",onPress:async()=>{try{await v.deleteEvent(r.id),U.default.alert("Success","Event deleted successfully"),t.goBack()}catch(He){console.error("Error deleting event:",He),U.default.alert("Error","Failed to delete event")}}}])},children:[(0,C.jsx)(k.default,{name:"trash-outline",size:20,color:"#FFFFFF"}),(0,C.jsx)(P.default,{style:ee.deleteButtonText,children:"Delete Event"})]}),(0,C.jsxs)(R.default,{style:ee.venueContainer,onPress:()=>{t.navigate("Venues",{screen:"VenueDetail",params:{venueId:r.venueId}})},children:[(0,C.jsx)(k.default,{name:"location",size:20,color:"#2196F3"}),(0,C.jsx)(P.default,{style:ee.venueName,children:r.venueName})]}),(0,C.jsxs)(z.default,{style:ee.dateContainer,children:[(0,C.jsx)(k.default,{name:"calendar",size:20,color:"#FFFFFF"}),(0,C.jsx)(P.default,{style:ee.dateText,children:r.date.toDateString()})]}),(0,C.jsx)(P.default,{style:ee.sectionTitle,children:"About this event"}),(0,C.jsx)(P.default,{style:ee.description,children:r.description}),(0,C.jsx)(P.default,{style:ee.sectionTitle,children:"Artists"}),(0,C.jsx)(z.default,{style:ee.artistsContainer,children:r.artists.map(((e,t)=>(0,C.jsx)(z.default,{style:ee.artistTag,children:(0,C.jsx)(P.default,{style:ee.artistText,children:e})},t)))}),(0,C.jsx)(R.default,{style:ee.button,children:(0,C.jsx)(P.default,{style:ee.buttonText,children:"Free Entry"===r.entryFee?"Get Free Entry":`Buy Ticket (${r.entryFee})`})})]})]}):(0,C.jsx)(z.default,{style:ee.loadingContainer,children:(0,C.jsx)(P.default,{style:ee.loadingText,children:"Event not found"})});var f};var ne=n(79632);const oe=L.default.create({container:{flex:1,backgroundColor:"#121212"},header:{padding:16,borderBottomWidth:1,borderBottomColor:"#333"},headerTitle:{fontSize:24,fontWeight:"bold",color:"#FFFFFF",marginBottom:8},headerSubtitle:{fontSize:16,color:"#BBBBBB"},loadingContainer:{flex:1,justifyContent:"center",alignItems:"center"},loadingText:{color:"#FFFFFF",textAlign:"center",marginTop:20},emptyContainer:{flex:1,justifyContent:"center",alignItems:"center",padding:20},emptyText:{color:"#FFFFFF",fontSize:18,marginTop:16},venueList:{flex:1,padding:16},venueCard:{backgroundColor:"#1E1E1E",borderRadius:8,padding:16,marginBottom:12},selectedVenueCard:{backgroundColor:"#2a2a2a",borderWidth:1,borderColor:"#2196F3"},venueInfo:{flex:1,marginBottom:12},venueName:{fontSize:18,fontWeight:"bold",color:"#FFFFFF",marginBottom:4},venueAddress:{fontSize:14,color:"#BBBBBB",marginBottom:4},venueCategories:{fontSize:14,color:"#2196F3"},venueRating:{flexDirection:"row",alignItems:"center",backgroundColor:"rgba(0,0,0,0.3)",borderRadius:16,paddingHorizontal:8,paddingVertical:4,alignSelf:"flex-start",marginBottom:12},ratingText:{color:"#FFFFFF",marginRight:4,fontWeight:"bold"},venueActions:{flexDirection:"row",justifyContent:"flex-end"},actionButton:{flexDirection:"row",alignItems:"center",backgroundColor:"#2a2a2a",paddingHorizontal:12,paddingVertical:8,borderRadius:4,marginLeft:8},actionText:{color:"#2196F3",marginLeft:4,fontSize:14}}),re=({navigation:e,route:t})=>{const[n,o]=(0,l.useState)([]),[r,a]=(0,l.useState)(!0),[i,s]=(0,l.useState)(null),d=t.params?.destinationVenueId;(0,l.useEffect)((()=>e.addListener("focus",(()=>{c()}))),[e]),(0,l.useEffect)((()=>{if(d&&n.length>0){const e=n.find((e=>e.id===d));e&&s(e)}}),[d,n]);const c=async()=>{try{a(!0);const e=await v.getVenues();o(e)}catch(He){console.error("Error loading venues for map:",He)}finally{a(!1)}};return(0,C.jsxs)(z.default,{style:oe.container,children:[(0,C.jsxs)(z.default,{style:oe.header,children:[(0,C.jsx)(P.default,{style:oe.headerTitle,children:"Venue Locations"}),(0,C.jsx)(P.default,{style:oe.headerSubtitle,children:"Interactive maps are available in the mobile app. Here's a list of venues:"})]}),r?(0,C.jsx)(z.default,{style:oe.loadingContainer,children:(0,C.jsx)(P.default,{style:oe.loadingText,children:"Loading venues..."})}):0===n.length?(0,C.jsxs)(z.default,{style:oe.emptyContainer,children:[(0,C.jsx)(k.default,{name:"location-outline",size:64,color:"#666666"}),(0,C.jsx)(P.default,{style:oe.emptyText,children:"No venues found"})]}):(0,C.jsx)(M.default,{style:oe.venueList,children:n.map((t=>(0,C.jsxs)(z.default,{style:[oe.venueCard,i?.id===t.id&&oe.selectedVenueCard],children:[(0,C.jsxs)(z.default,{style:oe.venueInfo,children:[(0,C.jsx)(P.default,{style:oe.venueName,children:t.name}),(0,C.jsx)(P.default,{style:oe.venueAddress,children:t.location}),(0,C.jsx)(P.default,{style:oe.venueCategories,children:t.categories.join(", ")})]}),(0,C.jsxs)(z.default,{style:oe.venueRating,children:[(0,C.jsx)(P.default,{style:oe.ratingText,children:t.vibeRating.toFixed(1)}),(0,C.jsx)(k.default,{name:"star",size:16,color:"#FFD700"})]}),(0,C.jsxs)(z.default,{style:oe.venueActions,children:[(0,C.jsxs)(R.default,{style:oe.actionButton,onPress:()=>{return n=t.id,void e.navigate("VenueDetail",{venueId:n});var n},children:[(0,C.jsx)(k.default,{name:"information-circle",size:20,color:"#2196F3"}),(0,C.jsx)(P.default,{style:oe.actionText,children:"Details"})]}),(0,C.jsxs)(R.default,{style:oe.actionButton,onPress:()=>(e=>{const t=`https://www.google.com/maps/dir/?api=1&destination=${e.latitude},${e.longitude}&destination_place_id=${e.name}`;ne.default.openURL(t)})(t),children:[(0,C.jsx)(k.default,{name:"navigate",size:20,color:"#2196F3"}),(0,C.jsx)(P.default,{style:oe.actionText,children:"Directions"})]})]})]},t.id)))})]})};var ae=n(63627);const le=L.default.create({container:{flex:1,backgroundColor:"#121212"},eventsContainer:{flex:1,padding:16},dateTitle:{fontSize:20,fontWeight:"bold",color:"#FFFFFF",marginBottom:16},loadingContainer:{flex:1,justifyContent:"center",alignItems:"center"},loadingText:{color:"#FFFFFF",marginTop:16},emptyContainer:{flex:1,justifyContent:"center",alignItems:"center"},emptyText:{color:"#FFFFFF",fontSize:18,marginTop:16},eventCard:{flexDirection:"row",backgroundColor:"#1E1E1E",borderRadius:8,overflow:"hidden",marginBottom:12},eventTimeContainer:{width:80,padding:12,backgroundColor:"#2196F3",justifyContent:"center",alignItems:"center"},eventTime:{color:"#FFFFFF",fontWeight:"bold"},eventDetails:{flex:1,padding:12},eventName:{fontSize:16,fontWeight:"bold",color:"#FFFFFF"},eventVenue:{fontSize:14,color:"#BBBBBB",marginTop:4}}),ie=({navigation:e})=>{const[t,n]=(0,l.useState)([]),[o,r]=(0,l.useState)((new Date).toISOString().split("T")[0]),[a,i]=(0,l.useState)({}),[s,d]=(0,l.useState)(!0);(0,l.useEffect)((()=>e.addListener("focus",(()=>{c()}))),[e]);const c=async()=>{try{d(!0);const e=await v.getEvents();n(e);const t={};e.forEach((e=>{const n=e.date.toISOString().split("T")[0];t[n]={marked:!0,dotColor:"#2196F3",selectedColor:n===o?"#2196F3":void 0,selected:n===o}})),t[o]||(t[o]={selected:!0,selectedColor:"#2196F3"}),i(t)}catch(He){console.error("Error loading events for calendar:",He)}finally{d(!1)}},u=t.filter((e=>e.date.toISOString().split("T")[0]===o));return(0,C.jsxs)(z.default,{style:le.container,children:[(0,C.jsx)(ae.Calendar,{theme:{backgroundColor:"#121212",calendarBackground:"#1E1E1E",textSectionTitleColor:"#FFFFFF",selectedDayBackgroundColor:"#2196F3",selectedDayTextColor:"#FFFFFF",todayTextColor:"#2196F3",dayTextColor:"#FFFFFF",textDisabledColor:"#444444",dotColor:"#2196F3",selectedDotColor:"#FFFFFF",arrowColor:"#2196F3",monthTextColor:"#FFFFFF",indicatorColor:"#2196F3"},markedDates:a,onDayPress:e=>{const t=e.dateString;r(t);const n=Object.assign({},a);a[o]&&(n[o]=Object.assign({},a[o],{selected:!1})),n[t]=Object.assign({},a[t]||{},{selected:!0,selectedColor:"#2196F3"}),i(n)},enableSwipeMonths:!0}),(0,C.jsxs)(z.default,{style:le.eventsContainer,children:[(0,C.jsxs)(P.default,{style:le.dateTitle,children:["Events on ",new Date(o).toDateString()]}),s?(0,C.jsxs)(z.default,{style:le.loadingContainer,children:[(0,C.jsx)(V.default,{size:"large",color:"#2196F3"}),(0,C.jsx)(P.default,{style:le.loadingText,children:"Loading events..."})]}):0===u.length?(0,C.jsxs)(z.default,{style:le.emptyContainer,children:[(0,C.jsx)(k.default,{name:"calendar-outline",size:64,color:"#666666"}),(0,C.jsx)(P.default,{style:le.emptyText,children:"No events on this date"})]}):(0,C.jsx)($.default,{data:u,keyExtractor:e=>e.id,renderItem:({item:t})=>{return(0,C.jsxs)(R.default,{style:le.eventCard,onPress:()=>{e.navigate("Events",{screen:"EventDetail",params:{eventId:t.id}})},children:[(0,C.jsx)(z.default,{style:le.eventTimeContainer,children:(0,C.jsx)(P.default,{style:le.eventTime,children:(n=t.date,n.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"}))})}),(0,C.jsxs)(z.default,{style:le.eventDetails,children:[(0,C.jsx)(P.default,{style:le.eventName,children:t.name}),(0,C.jsx)(P.default,{style:le.eventVenue,children:t.venueName})]})]});var n}})]})]})};var se=n(78264);const de=new class{async launchImageLibraryAsync(e){return new Promise((e=>{const t=document.createElement("input");t.type="file",t.accept="image/*",t.style.display="none",t.onchange=n=>{const o=n.target.files;if(!o||0===o.length)return e({canceled:!0}),void document.body.removeChild(t);const r=o[0],a=new FileReader;a.onload=n=>{const o=n.target?.result;e({canceled:!1,assets:[{uri:o,type:r.type,name:r.name,file:r}]}),document.body.removeChild(t)},a.onerror=()=>{e({canceled:!0}),document.body.removeChild(t)},a.readAsDataURL(r)},document.body.appendChild(t),t.click()}))}async requestMediaLibraryPermissionsAsync(){return{status:"granted"}}},ce=L.default.create({container:{flex:1,backgroundColor:"#121212"},profileHeader:{alignItems:"center",padding:24,borderBottomWidth:1,borderBottomColor:"#333"},avatarContainer:{width:100,height:100,borderRadius:50,backgroundColor:"#2196F3",justifyContent:"center",alignItems:"center",marginBottom:16,position:"relative"},avatar:{width:100,height:100,borderRadius:50},avatarText:{fontSize:40,fontWeight:"bold",color:"#FFFFFF"},avatarEditBadge:{position:"absolute",bottom:0,right:0,width:28,height:28,borderRadius:14,backgroundColor:"#2196F3",justifyContent:"center",alignItems:"center",borderWidth:2,borderColor:"#121212"},emailText:{fontSize:18,fontWeight:"bold",color:"#FFFFFF",marginBottom:4},displayNameText:{fontSize:16,color:"#FFFFFF",marginBottom:4},userTypeText:{fontSize:16,color:"#BBBBBB"},menuContainer:{flex:1,marginTop:24},menuItem:{flexDirection:"row",alignItems:"center",paddingVertical:16,paddingHorizontal:24,borderBottomWidth:1,borderBottomColor:"#333"},menuText:{flex:1,fontSize:16,color:"#FFFFFF",marginLeft:16},signOutButton:{margin:24,padding:16,backgroundColor:"#1E1E1E",borderRadius:8,alignItems:"center"},signOutText:{fontSize:16,color:"#FF3B30",fontWeight:"bold"},modalContainer:{flex:1,justifyContent:"center",alignItems:"center",backgroundColor:"rgba(0, 0, 0, 0.7)"},modalContent:{width:"90%",backgroundColor:"#1E1E1E",borderRadius:12,padding:24,alignItems:"center"},modalTitle:{fontSize:20,fontWeight:"bold",color:"#FFFFFF",marginBottom:20},profileImageContainer:{width:120,height:120,borderRadius:60,backgroundColor:"#2196F3",justifyContent:"center",alignItems:"center",marginBottom:24,position:"relative"},profileImage:{width:120,height:120,borderRadius:60},profileImagePlaceholder:{width:120,height:120,borderRadius:60,backgroundColor:"#333",justifyContent:"center",alignItems:"center"},profileImageEditBadge:{position:"absolute",bottom:0,right:0,width:36,height:36,borderRadius:18,backgroundColor:"#2196F3",justifyContent:"center",alignItems:"center",borderWidth:2,borderColor:"#1E1E1E"},inputLabel:{alignSelf:"flex-start",fontSize:16,color:"#FFFFFF",marginBottom:8},input:{width:"100%",backgroundColor:"#121212",borderRadius:8,padding:12,color:"#FFFFFF",marginBottom:24,borderWidth:1,borderColor:"#333"},modalButtons:{flexDirection:"row",justifyContent:"space-between",width:"100%"},modalButton:{flex:1,paddingVertical:12,borderRadius:8,alignItems:"center",marginHorizontal:8},cancelButton:{backgroundColor:"#333"},cancelButtonText:{color:"#FFFFFF",fontWeight:"bold"},saveButton:{backgroundColor:"#2196F3"},saveButtonText:{color:"#FFFFFF",fontWeight:"bold"},disabledButton:{opacity:.6}}),ue=({navigation:e})=>{const{user:t,signOut:n,updateProfile:o}=E(),[r,a]=(0,l.useState)(!1),[i,s]=(0,l.useState)(!1),[d,c]=(0,l.useState)(t?.displayName||""),[u,g]=(0,l.useState)(t?.photoURL||""),[f,m]=(0,l.useState)(!1);(0,l.useEffect)((()=>{t&&(t.displayName||t.photoURL)&&(c(t.displayName||""),g(t.photoURL||""))}),[t]);const h=()=>{s(!i)},F=async()=>{try{await de.requestMediaLibraryPermissionsAsync();const e=await de.launchImageLibraryAsync({mediaTypes:"Images",allowsEditing:!0,aspect:[1,1],quality:.8});if(!e.canceled&&e.assets&&e.assets.length>0){const t=e.assets[0].uri;if(g(t),!i){m(!0);try{const e=await v.uploadVenueImage(t);await o({photoURL:e}),U.default.alert("Success","Profile image updated successfully")}catch(He){U.default.alert("Error","Failed to update profile image")}finally{m(!1)}}}}catch(He){console.error("Error picking image:",He),U.default.alert("Error","Failed to pick image")}};return(0,C.jsxs)(z.default,{style:ce.container,children:[(0,C.jsxs)(z.default,{style:ce.profileHeader,children:[(0,C.jsxs)(R.default,{style:ce.avatarContainer,onPress:F,children:[u?(0,C.jsx)(G.default,{source:{uri:u},style:ce.avatar}):(0,C.jsx)(P.default,{style:ce.avatarText,children:t?.email.charAt(0).toUpperCase()||"U"}),(0,C.jsx)(z.default,{style:ce.avatarEditBadge,children:(0,C.jsx)(k.default,{name:"camera",size:16,color:"#FFFFFF"})})]}),(0,C.jsx)(P.default,{style:ce.emailText,children:t?.email}),d&&(0,C.jsx)(P.default,{style:ce.displayNameText,children:d}),(0,C.jsx)(P.default,{style:ce.userTypeText,children:"user"===t?.userType?"Regular User":"club_owner"===t?.userType?"Club Owner":"Admin"})]}),(0,C.jsxs)(M.default,{style:ce.menuContainer,children:[(0,C.jsxs)(R.default,{style:ce.menuItem,onPress:h,children:[(0,C.jsx)(k.default,{name:"person-outline",size:24,color:"#FFFFFF"}),(0,C.jsx)(P.default,{style:ce.menuText,children:"Edit Profile"}),(0,C.jsx)(k.default,{name:"chevron-forward",size:24,color:"#666666"})]}),"club_owner"===t?.userType&&(0,C.jsxs)(R.default,{style:ce.menuItem,onPress:()=>{"club_owner"===t?.userType&&e.navigate("MyVenues")},children:[(0,C.jsx)(k.default,{name:"business-outline",size:24,color:"#FFFFFF"}),(0,C.jsx)(P.default,{style:ce.menuText,children:"My Venues"}),(0,C.jsx)(k.default,{name:"chevron-forward",size:24,color:"#666666"})]}),"admin"===t?.userType&&(0,C.jsxs)(C.Fragment,{children:[(0,C.jsxs)(R.default,{style:ce.menuItem,onPress:()=>{"admin"===t?.userType&&e.navigate("AdminUsers")},children:[(0,C.jsx)(k.default,{name:"people-outline",size:24,color:"#FFFFFF"}),(0,C.jsx)(P.default,{style:ce.menuText,children:"Manage Users"}),(0,C.jsx)(k.default,{name:"chevron-forward",size:24,color:"#666666"})]}),(0,C.jsxs)(R.default,{style:ce.menuItem,onPress:()=>{"admin"===t?.userType&&e.navigate("AdminVenues")},children:[(0,C.jsx)(k.default,{name:"business-outline",size:24,color:"#FFFFFF"}),(0,C.jsx)(P.default,{style:ce.menuText,children:"Manage Venues"}),(0,C.jsx)(k.default,{name:"chevron-forward",size:24,color:"#666666"})]}),(0,C.jsxs)(R.default,{style:ce.menuItem,onPress:()=>{"admin"===t?.userType&&e.navigate("AdminEvents")},children:[(0,C.jsx)(k.default,{name:"calendar-outline",size:24,color:"#FFFFFF"}),(0,C.jsx)(P.default,{style:ce.menuText,children:"Manage Events"}),(0,C.jsx)(k.default,{name:"chevron-forward",size:24,color:"#666666"})]})]}),(0,C.jsxs)(R.default,{style:ce.menuItem,onPress:()=>{U.default.alert("Notifications","You have no new notifications")},children:[(0,C.jsx)(k.default,{name:"notifications-outline",size:24,color:"#FFFFFF"}),(0,C.jsx)(P.default,{style:ce.menuText,children:"Notifications"}),(0,C.jsx)(k.default,{name:"chevron-forward",size:24,color:"#666666"})]}),(0,C.jsxs)(R.default,{style:ce.menuItem,onPress:()=>{U.default.alert("Settings","Settings functionality coming soon")},children:[(0,C.jsx)(k.default,{name:"settings-outline",size:24,color:"#FFFFFF"}),(0,C.jsx)(P.default,{style:ce.menuText,children:"Settings"}),(0,C.jsx)(k.default,{name:"chevron-forward",size:24,color:"#666666"})]}),(0,C.jsxs)(R.default,{style:ce.menuItem,onPress:()=>{U.default.alert("Help & Support","For help or support, please contact support@yovibe.com")},children:[(0,C.jsx)(k.default,{name:"help-circle-outline",size:24,color:"#FFFFFF"}),(0,C.jsx)(P.default,{style:ce.menuText,children:"Help & Support"}),(0,C.jsx)(k.default,{name:"chevron-forward",size:24,color:"#666666"})]})]}),(0,C.jsx)(R.default,{style:ce.signOutButton,onPress:async()=>{a(!0);try{await n()}catch(He){U.default.alert("Error","Failed to sign out")}finally{a(!1)}},disabled:r,children:r?(0,C.jsx)(V.default,{color:"#FF3B30"}):(0,C.jsx)(P.default,{style:ce.signOutText,children:"Sign Out"})}),(0,C.jsx)(se.default,{animationType:"slide",transparent:!0,visible:i,onRequestClose:h,children:(0,C.jsx)(z.default,{style:ce.modalContainer,children:(0,C.jsxs)(z.default,{style:ce.modalContent,children:[(0,C.jsx)(P.default,{style:ce.modalTitle,children:"Edit Profile"}),(0,C.jsxs)(R.default,{style:ce.profileImageContainer,onPress:F,children:[u?(0,C.jsx)(G.default,{source:{uri:u},style:ce.profileImage}):(0,C.jsx)(z.default,{style:ce.profileImagePlaceholder,children:(0,C.jsx)(k.default,{name:"person",size:60,color:"#666666"})}),(0,C.jsx)(z.default,{style:ce.profileImageEditBadge,children:(0,C.jsx)(k.default,{name:"camera",size:20,color:"#FFFFFF"})})]}),(0,C.jsx)(P.default,{style:ce.inputLabel,children:"Display Name"}),(0,C.jsx)(A.default,{style:ce.input,value:d,onChangeText:c,placeholder:"Enter your name",placeholderTextColor:"#999"}),(0,C.jsxs)(z.default,{style:ce.modalButtons,children:[(0,C.jsx)(R.default,{style:[ce.modalButton,ce.cancelButton],onPress:h,disabled:f,children:(0,C.jsx)(P.default,{style:ce.cancelButtonText,children:"Cancel"})}),(0,C.jsx)(R.default,{style:[ce.modalButton,ce.saveButton,f&&ce.disabledButton],onPress:async()=>{if(t){m(!0);try{await o({displayName:d,photoURL:u}),s(!1),U.default.alert("Success","Profile updated successfully")}catch(He){U.default.alert("Error","Failed to update profile")}finally{m(!1)}}},disabled:f,children:f?(0,C.jsx)(V.default,{color:"#FFFFFF"}):(0,C.jsx)(P.default,{style:ce.saveButtonText,children:"Save"})})]})]})})})]})};const ge=new class{async requestPermissions(){try{return!!navigator.geolocation}catch(He){return console.error("Error requesting location permissions:",He),!1}}async getCurrentPosition(){return new Promise(((e,t)=>{navigator.geolocation?navigator.geolocation.getCurrentPosition((t=>{e({latitude:t.coords.latitude,longitude:t.coords.longitude,accuracy:t.coords.accuracy,timestamp:t.timestamp})}),(t=>{console.error("Error getting current position:",t),e({latitude:37.78825,longitude:-122.4324,accuracy:null,timestamp:Date.now()})}),{enableHighAccuracy:!0,timeout:15e3,maximumAge:1e4}):e({latitude:37.78825,longitude:-122.4324,accuracy:null,timestamp:Date.now()})}))}watchPosition(e){if(!navigator.geolocation)return{remove:()=>{}};const t=navigator.geolocation.watchPosition((t=>{e({latitude:t.coords.latitude,longitude:t.coords.longitude,accuracy:t.coords.accuracy,timestamp:t.timestamp})}),(e=>{console.error("Error watching position:",e)}),{enableHighAccuracy:!0,timeout:15e3,maximumAge:1e4});return{remove:()=>{navigator.geolocation.clearWatch(t)}}}},fe=L.default.create({container:{flex:1,backgroundColor:"#121212"},form:{padding:16},label:{fontSize:16,color:"#FFFFFF",marginBottom:8},input:{backgroundColor:"#1E1E1E",borderRadius:8,padding:12,color:"#FFFFFF",marginBottom:16,borderWidth:1,borderColor:"#333"},textArea:{height:100,textAlignVertical:"top"},locationContainer:{flexDirection:"row",justifyContent:"space-between"},locationField:{width:"48%"},imagePreview:{height:200,marginBottom:16,borderRadius:8,overflow:"hidden"},previewImage:{width:"100%",height:"100%"},submitButton:{backgroundColor:"#2196F3",borderRadius:8,padding:16,alignItems:"center"},disabledButton:{opacity:.6},submitButtonText:{color:"#FFFFFF",fontSize:16,fontWeight:"bold"}}),me=({navigation:e})=>{const{user:t}=E(),[n,o]=(0,l.useState)(""),[r,a]=(0,l.useState)(""),[i,s]=(0,l.useState)(""),[d,c]=(0,l.useState)(""),[u,g]=(0,l.useState)("4.5"),[f,m]=(0,l.useState)("0"),[h,F]=(0,l.useState)("0"),[y,x]=(0,l.useState)(null),[p,j]=(0,l.useState)(!1),[b,w]=(0,l.useState)(!1),[B,S]=(0,l.useState)(null);(0,l.useEffect)((()=>{(async()=>{const e=await ge.requestPermissions();if(w(e),e){const e=await ge.getCurrentPosition(),{latitude:t,longitude:n}=e;S({latitude:t,longitude:n}),m(t.toString()),F(n.toString())}})()}),[]);return(0,C.jsx)(M.default,{style:fe.container,children:(0,C.jsxs)(z.default,{style:fe.form,children:[(0,C.jsx)(P.default,{style:fe.label,children:"Venue Name *"}),(0,C.jsx)(A.default,{style:fe.input,value:n,onChangeText:o,placeholder:"Enter venue name",placeholderTextColor:"#999"}),(0,C.jsx)(P.default,{style:fe.label,children:"Address *"}),(0,C.jsx)(A.default,{style:fe.input,value:r,onChangeText:a,placeholder:"Enter venue address",placeholderTextColor:"#999"}),(0,C.jsx)(P.default,{style:fe.label,children:"Description *"}),(0,C.jsx)(A.default,{style:[fe.input,fe.textArea],value:i,onChangeText:s,placeholder:"Enter venue description",placeholderTextColor:"#999",multiline:!0,numberOfLines:4}),(0,C.jsx)(P.default,{style:fe.label,children:"Categories *"}),(0,C.jsx)(A.default,{style:fe.input,value:d,onChangeText:c,placeholder:"Enter categories (comma separated)",placeholderTextColor:"#999"}),(0,C.jsx)(P.default,{style:fe.label,children:"Vibe Rating (1-5)"}),(0,C.jsx)(A.default,{style:fe.input,value:u,onChangeText:g,placeholder:"Enter vibe rating (e.g. 4.5)",placeholderTextColor:"#999",keyboardType:"numeric"}),(0,C.jsxs)(z.default,{style:fe.locationContainer,children:[(0,C.jsxs)(z.default,{style:fe.locationField,children:[(0,C.jsx)(P.default,{style:fe.label,children:"Latitude"}),(0,C.jsx)(A.default,{style:fe.input,value:f,onChangeText:m,placeholder:"Latitude",placeholderTextColor:"#999",keyboardType:"numeric"})]}),(0,C.jsxs)(z.default,{style:fe.locationField,children:[(0,C.jsx)(P.default,{style:fe.label,children:"Longitude"}),(0,C.jsx)(A.default,{style:fe.input,value:h,onChangeText:F,placeholder:"Longitude",placeholderTextColor:"#999",keyboardType:"numeric"})]})]}),(0,C.jsx)(P.default,{style:fe.label,children:"Venue Image URL *"}),(0,C.jsx)(A.default,{style:fe.input,value:y||"",onChangeText:x,placeholder:"Enter image URL",placeholderTextColor:"#999"}),y&&(0,C.jsx)(z.default,{style:fe.imagePreview,children:(0,C.jsx)(G.default,{source:{uri:y},style:fe.previewImage})}),(0,C.jsx)(R.default,{style:[fe.submitButton,p&&fe.disabledButton],onPress:async()=>{if(n&&r&&i&&d)if(y)if(t){j(!0);try{const o=await v.uploadVenueImage(y),a={name:n,location:r,description:i,categories:d.split(",").map((e=>e.trim())),vibeRating:Number.parseFloat(u)||4.5,backgroundImageUrl:o,latitude:Number.parseFloat(f)||0,longitude:Number.parseFloat(h)||0,ownerId:t.id,weeklyPrograms:{},todayImages:[],createdAt:new Date};await v.addVenue(a),U.default.alert("Success","Venue created successfully"),e.goBack()}catch(He){U.default.alert("Error","Failed to create venue"),console.error(He)}finally{j(!1)}}else U.default.alert("Error","You must be logged in to add a venue");else U.default.alert("Error","Please select an image for the venue");else U.default.alert("Error","Please fill in all required fields")},disabled:p,children:p?(0,C.jsx)(V.default,{color:"#FFFFFF"}):(0,C.jsx)(P.default,{style:fe.submitButtonText,children:"Create Venue"})})]})})},he=L.default.create({container:{flex:1,backgroundColor:"#121212"},form:{padding:16},label:{fontSize:16,color:"#FFFFFF",marginBottom:8},input:{backgroundColor:"#1E1E1E",borderRadius:8,padding:12,color:"#FFFFFF",marginBottom:16,borderWidth:1,borderColor:"#333"},textArea:{height:100,textAlignVertical:"top"},datePickerContainer:{marginBottom:16},venueToggleContainer:{flexDirection:"row",marginBottom:16},venueToggleButton:{flex:1,padding:10,alignItems:"center",borderWidth:1,borderColor:"#333",backgroundColor:"#1E1E1E"},venueToggleButtonActive:{backgroundColor:"#2196F3"},venueToggleText:{color:"#FFFFFF",fontSize:14},venueSelector:{flexDirection:"row",justifyContent:"space-between",alignItems:"center",backgroundColor:"#1E1E1E",borderRadius:8,padding:12,marginBottom:8,borderWidth:1,borderColor:"#333"},venueSelectorText:{color:"#FFFFFF"},venueDropdown:{backgroundColor:"#1E1E1E",borderRadius:8,marginBottom:16,borderWidth:1,borderColor:"#333",maxHeight:150},venueList:{padding:8},venueItem:{padding:12,borderBottomWidth:1,borderBottomColor:"#333"},venueItemText:{color:"#FFFFFF"},venueInfo:{backgroundColor:"#1E1E1E",borderRadius:8,padding:12,marginBottom:16,borderWidth:1,borderColor:"#333"},venueText:{color:"#FFFFFF"},checkboxContainer:{flexDirection:"row",alignItems:"center",marginBottom:16},checkbox:{marginRight:8},checkboxLabel:{color:"#FFFFFF"},imageOptions:{flexDirection:"row",marginBottom:16},imageButton:{flexDirection:"row",alignItems:"center",justifyContent:"center",backgroundColor:"#2196F3",padding:12,borderRadius:8,flex:1,marginRight:8},imageButtonText:{color:"#FFFFFF",marginLeft:8},imagePreview:{height:200,marginBottom:16,borderRadius:8,overflow:"hidden",position:"relative"},previewImage:{width:"100%",height:"100%"},removeImageButton:{position:"absolute",top:8,right:8,backgroundColor:"rgba(0,0,0,0.6)",borderRadius:15,padding:2},submitButton:{flexDirection:"row",alignItems:"center",justifyContent:"center",backgroundColor:"#2196F3",borderRadius:8,padding:16,marginTop:8},disabledButton:{opacity:.6},submitButtonText:{color:"#FFFFFF",fontSize:16,fontWeight:"bold",marginLeft:8},priceContainer:{flexDirection:"row",marginBottom:16},priceButton:{flex:1,padding:12,alignItems:"center",backgroundColor:"#1E1E1E",marginRight:8,borderRadius:8,borderWidth:1,borderColor:"#333"},selectedPriceButton:{backgroundColor:"#2196F3",borderColor:"#2196F3"},priceButtonText:{color:"#FFFFFF",fontSize:14,fontWeight:"bold"}}),Fe=({navigation:e,route:t})=>{const{user:n}=E(),[o,r]=(0,l.useState)(""),[a,i]=(0,l.useState)(""),[s,d]=(0,l.useState)(new Date),[c,u]=(0,l.useState)((new Date).toISOString().split("T")[0]),[g,f]=(0,l.useState)(""),[m,h]=(0,l.useState)(null),[F,y]=(0,l.useState)(null),[x,p]=(0,l.useState)(!1),[j,b]=(0,l.useState)(!1),[w,B]=(0,l.useState)([]),[S,T]=(0,l.useState)(t.params?.venueId||""),[I,D]=(0,l.useState)(t.params?.venueName||""),[L,N]=(0,l.useState)(!1),[W,O]=(0,l.useState)(!1),[H,q]=(0,l.useState)(""),[$,_]=(0,l.useState)(""),[J,Y]=(0,l.useState)(""),[X,K]=(0,l.useState)("1"),[Q,Z]=(0,l.useState)("");(0,l.useEffect)((()=>{n&&"club_owner"!==n.userType&&ee()}),[n]);const ee=async()=>{try{const e=await v.getVenues();B(e.map((e=>({id:e.id,name:e.name}))))}catch(He){console.error("Error loading venues:",He)}};return(0,C.jsx)(M.default,{style:he.container,children:(0,C.jsxs)(z.default,{style:he.form,children:[(0,C.jsx)(P.default,{style:he.label,children:"Event Name *"}),(0,C.jsx)(A.default,{style:he.input,value:o,onChangeText:r,placeholder:"Enter event name",placeholderTextColor:"#999"}),(0,C.jsx)(P.default,{style:he.label,children:"Description *"}),(0,C.jsx)(A.default,{style:[he.input,he.textArea],value:a,onChangeText:i,placeholder:"Enter event description",placeholderTextColor:"#999",multiline:!0,numberOfLines:4}),(0,C.jsx)(P.default,{style:he.label,children:"Event Date *"}),(0,C.jsx)(z.default,{style:he.datePickerContainer,children:(0,C.jsx)("input",{type:"date",value:c,onChange:e=>{const t=new Date(e.target.value);d(t),u(e.target.value)},min:(new Date).toISOString().split("T")[0],style:{backgroundColor:"#1E1E1E",color:"#FFFFFF",padding:"12px",borderRadius:"8px",border:"1px solid #333",width:"100%",marginBottom:"16px"}})}),(0,C.jsx)(P.default,{style:he.label,children:"Artists *"}),(0,C.jsx)(A.default,{style:he.input,value:g,onChangeText:f,placeholder:"Enter artists (comma separated)",placeholderTextColor:"#999"}),(!n?.userType||"club_owner"!==n?.userType)&&(0,C.jsxs)(C.Fragment,{children:[(0,C.jsxs)(z.default,{style:he.venueToggleContainer,children:[(0,C.jsx)(R.default,{style:[he.venueToggleButton,!W&&he.venueToggleButtonActive],onPress:()=>O(!1),children:(0,C.jsx)(P.default,{style:he.venueToggleText,children:"Select Existing Venue"})}),(0,C.jsx)(R.default,{style:[he.venueToggleButton,W&&he.venueToggleButtonActive],onPress:()=>O(!0),children:(0,C.jsx)(P.default,{style:he.venueToggleText,children:"Add Custom Venue"})})]}),W?(0,C.jsxs)(C.Fragment,{children:[(0,C.jsx)(P.default,{style:he.label,children:"Custom Venue Name *"}),(0,C.jsx)(A.default,{style:he.input,value:H,onChangeText:q,placeholder:"Enter venue name",placeholderTextColor:"#999"}),(0,C.jsx)(P.default,{style:he.label,children:"Custom Venue Address *"}),(0,C.jsx)(A.default,{style:he.input,value:$,onChangeText:_,placeholder:"Enter venue address",placeholderTextColor:"#999"})]}):(0,C.jsxs)(C.Fragment,{children:[(0,C.jsx)(P.default,{style:he.label,children:"Venue *"}),(0,C.jsxs)(R.default,{style:he.venueSelector,onPress:()=>N(!L),children:[(0,C.jsx)(P.default,{style:he.venueSelectorText,children:I||"Select a venue"}),(0,C.jsx)(k.default,{name:L?"chevron-up":"chevron-down",size:24,color:"#FFFFFF"})]}),L&&(0,C.jsx)(z.default,{style:he.venueDropdown,children:(0,C.jsx)(M.default,{style:he.venueList,nestedScrollEnabled:!0,children:w.map((e=>(0,C.jsx)(R.default,{style:he.venueItem,onPress:()=>{return t=e.id,n=e.name,T(t),D(n),N(!1),void O(!1);var t,n},children:(0,C.jsx)(P.default,{style:he.venueItemText,children:e.name})},e.id)))})})]})]}),"club_owner"===n?.userType&&(0,C.jsxs)(C.Fragment,{children:[(0,C.jsx)(P.default,{style:he.label,children:"Venue"}),(0,C.jsx)(z.default,{style:he.venueInfo,children:(0,C.jsx)(P.default,{style:he.venueText,children:I||"No venue selected"})})]}),"admin"===n?.userType&&(0,C.jsxs)(z.default,{style:he.checkboxContainer,children:[(0,C.jsx)(R.default,{style:he.checkbox,onPress:()=>p(!x),children:x?(0,C.jsx)(k.default,{name:"checkbox",size:24,color:"#2196F3"}):(0,C.jsx)(k.default,{name:"square-outline",size:24,color:"#FFFFFF"})}),(0,C.jsx)(P.default,{style:he.checkboxLabel,children:"Feature this event"})]}),(0,C.jsx)(P.default,{style:he.label,children:"Location (City) *"}),(0,C.jsx)(A.default,{style:he.input,value:J,onChangeText:Y,placeholder:"Enter event location (e.g. KAMPALA)",placeholderTextColor:"#999"}),(0,C.jsx)(P.default,{style:he.label,children:"Entry Fee (UGX)"}),(0,C.jsx)(A.default,{style:he.input,value:Q,onChangeText:Z,placeholder:"Enter entry fee (e.g. 20,000 UGX)",placeholderTextColor:"#999"}),(0,C.jsx)(P.default,{style:he.label,children:"Price Range"}),(0,C.jsxs)(z.default,{style:he.priceContainer,children:[(0,C.jsx)(R.default,{style:[he.priceButton,"1"===X&&he.selectedPriceButton],onPress:()=>K("1"),children:(0,C.jsx)(P.default,{style:he.priceButtonText,children:"Budget"})}),(0,C.jsx)(R.default,{style:[he.priceButton,"2"===X&&he.selectedPriceButton],onPress:()=>K("2"),children:(0,C.jsx)(P.default,{style:he.priceButtonText,children:"Mid-range"})}),(0,C.jsx)(R.default,{style:[he.priceButton,"3"===X&&he.selectedPriceButton],onPress:()=>K("3"),children:(0,C.jsx)(P.default,{style:he.priceButtonText,children:"Premium"})})]}),(0,C.jsx)(P.default,{style:he.label,children:"Event Poster *"}),(0,C.jsxs)(z.default,{style:he.imageOptions,children:[(0,C.jsxs)(R.default,{style:he.imageButton,onPress:async()=>{try{const e=await de.launchImageLibraryAsync({mediaTypes:"Images",allowsEditing:!0,aspect:[3,4],quality:.8});if(!e.canceled&&e.assets&&e.assets.length>0){const t=e.assets[0];console.log("Image selected:",t.uri.substring(0,50)+"..."),h(t.uri),y(t)}}catch(He){console.error("Error picking image:",He),U.default.alert("Error","Failed to pick image")}},children:[(0,C.jsx)(k.default,{name:"image",size:20,color:"#FFFFFF"}),(0,C.jsx)(P.default,{style:he.imageButtonText,children:"Pick from Device"})]}),(0,C.jsxs)(R.default,{style:he.imageButton,onPress:()=>{U.default.alert("Image URL","Please enter the URL of the image:",[{text:"Cancel",style:"cancel"},{text:"OK",onPress:e=>{e&&h(e)}}],{prompt:{type:"plain-text",placeholder:"https://example.com/image.jpg"}})},children:[(0,C.jsx)(k.default,{name:"link",size:20,color:"#FFFFFF"}),(0,C.jsx)(P.default,{style:he.imageButtonText,children:"Enter URL"})]})]}),m&&(0,C.jsxs)(z.default,{style:he.imagePreview,children:[(0,C.jsx)(G.default,{source:{uri:m},style:he.previewImage}),(0,C.jsx)(R.default,{style:he.removeImageButton,onPress:()=>{h(null),y(null)},children:(0,C.jsx)(k.default,{name:"close-circle",size:24,color:"#FFFFFF"})})]}),(0,C.jsx)(R.default,{style:[he.submitButton,j&&he.disabledButton],onPress:async()=>{if(o&&a&&g)if(m)if(n)if(W||S)if(!W||H&&$)if(J){b(!0);try{let t=S,r=I;if(W){const e={name:H,location:$,description:`Custom venue for event: ${o}`,categories:["Other"],vibeRating:4,backgroundImageUrl:m,latitude:0,longitude:0,ownerId:n.id,createdAt:new Date};t=await v.addVenue(e),r=H}let l=m;if(m)try{console.log("Uploading event poster image..."),l=await v.uploadEventImage(m),console.log("Image uploaded successfully:",l.substring(0,50)+"...")}catch(He){console.error("Error uploading image:",He),U.default.alert("Warning","There was an issue uploading the image, but we'll continue creating the event.")}const i={name:o,description:a,date:s,artists:g.split(",").map((e=>e.trim())),venueId:t,venueName:r,posterImageUrl:l,isFeatured:x,location:J.toUpperCase(),priceIndicator:Number.parseInt(X),entryFee:Q||"Free Entry",attendees:[],createdAt:new Date,createdBy:n.id,createdByType:n.userType};await v.addEvent(i),U.default.alert("Success","Event created successfully"),e.goBack()}catch(He){U.default.alert("Error","Failed to create event"),console.error(He)}finally{b(!1)}}else U.default.alert("Error","Please enter the location of the event");else U.default.alert("Error","Please enter both name and address for the custom venue");else U.default.alert("Error","Please select a venue for this event");else U.default.alert("Error","You must be logged in to add an event");else U.default.alert("Error","Please select an image for the event");else U.default.alert("Error","Please fill in all required fields")},disabled:j,children:j?(0,C.jsx)(V.default,{color:"#FFFFFF"}):(0,C.jsxs)(C.Fragment,{children:[(0,C.jsx)(k.default,{name:"add-circle-outline",size:20,color:"#FFFFFF"}),(0,C.jsx)(P.default,{style:he.submitButtonText,children:"Create Event"})]})})]})})},ye=L.default.create({container:{flex:1,backgroundColor:"#121212",padding:16},loadingContainer:{flex:1,justifyContent:"center",alignItems:"center",backgroundColor:"#121212"},loadingText:{color:"#FFFFFF",marginTop:16},addButton:{flexDirection:"row",alignItems:"center",backgroundColor:"#2196F3",padding:12,borderRadius:8,marginBottom:16,justifyContent:"center"},addButtonText:{color:"#FFFFFF",fontWeight:"bold",marginLeft:8},emptyContainer:{flex:1,justifyContent:"center",alignItems:"center",padding:24},emptyText:{color:"#FFFFFF",fontSize:18,fontWeight:"bold",marginTop:16},emptySubtext:{color:"#999999",fontSize:14,marginTop:8,textAlign:"center"},venueCard:{marginBottom:16,borderRadius:12,overflow:"hidden",backgroundColor:"#1E1E1E"},venueContent:{height:180},venueImage:{flex:1,justifyContent:"space-between"},venueGradient:{flex:1,justifyContent:"flex-end",padding:16,backgroundColor:"rgba(0,0,0,0.4)"},venueName:{fontSize:24,fontWeight:"bold",color:"white"},venueInfo:{fontSize:16,color:"rgba(255,255,255,0.8)",marginTop:4},venueActions:{flexDirection:"row",padding:12,borderTopWidth:1,borderTopColor:"#333"},actionButton:{flexDirection:"row",alignItems:"center",padding:8,borderRadius:4,marginRight:12},actionText:{color:"#2196F3",marginLeft:4},deleteButton:{marginLeft:"auto"},deleteText:{color:"#FF3B30",marginLeft:4}}),xe=({navigation:e})=>{const{user:t}=E(),[n,o]=(0,l.useState)([]),[r,a]=(0,l.useState)(!0);(0,l.useEffect)((()=>{i()}),[]);const i=async()=>{if(t){a(!0);try{const e=await v.getVenuesByOwner(t.id);o(e)}catch(He){console.error("Error loading venues:",He),U.default.alert("Error","Failed to load venues")}finally{a(!1)}}};return r?(0,C.jsxs)(z.default,{style:ye.loadingContainer,children:[(0,C.jsx)(V.default,{size:"large",color:"#2196F3"}),(0,C.jsx)(P.default,{style:ye.loadingText,children:"Loading venues..."})]}):(0,C.jsxs)(z.default,{style:ye.container,children:[(0,C.jsxs)(R.default,{style:ye.addButton,onPress:()=>{e.navigate("AddVenue")},children:[(0,C.jsx)(k.default,{name:"add",size:24,color:"#FFFFFF"}),(0,C.jsx)(P.default,{style:ye.addButtonText,children:"Add New Venue"})]}),0===n.length?(0,C.jsxs)(z.default,{style:ye.emptyContainer,children:[(0,C.jsx)(k.default,{name:"business-outline",size:64,color:"#666666"}),(0,C.jsx)(P.default,{style:ye.emptyText,children:"You don't have any venues yet"}),(0,C.jsx)(P.default,{style:ye.emptySubtext,children:"Add your first venue to get started"})]}):(0,C.jsx)($.default,{data:n,keyExtractor:e=>e.id,renderItem:({item:t})=>(0,C.jsxs)(z.default,{style:ye.venueCard,children:[(0,C.jsx)(R.default,{style:ye.venueContent,onPress:()=>{return n=t.id,void e.navigate("VenueDetail",{venueId:n});var n},children:(0,C.jsx)(N.default,{source:{uri:t.backgroundImageUrl},style:ye.venueImage,resizeMode:"cover",children:(0,C.jsxs)(z.default,{style:ye.venueGradient,children:[(0,C.jsx)(P.default,{style:ye.venueName,children:t.name}),(0,C.jsxs)(P.default,{style:ye.venueInfo,children:[t.categories.join(", ")," \u2022 Vibe Rating: ",t.vibeRating.toFixed(1),"\u2b50\ufe0f"]})]})})}),(0,C.jsxs)(z.default,{style:ye.venueActions,children:[(0,C.jsxs)(R.default,{style:ye.actionButton,onPress:()=>e.navigate("AddEvent",{venueId:t.id,venueName:t.name}),children:[(0,C.jsx)(k.default,{name:"calendar",size:20,color:"#2196F3"}),(0,C.jsx)(P.default,{style:ye.actionText,children:"Add Event"})]}),(0,C.jsxs)(R.default,{style:[ye.actionButton,ye.deleteButton],onPress:()=>(async e=>{U.default.alert("Delete Venue","Are you sure you want to delete this venue? This action cannot be undone.",[{text:"Cancel",style:"cancel"},{text:"Delete",style:"destructive",onPress:async()=>{a(!0);try{await v.deleteVenue(e),i()}catch(He){console.error("Error deleting venue:",He),U.default.alert("Error","Failed to delete venue"),a(!1)}}}])})(t.id),children:[(0,C.jsx)(k.default,{name:"trash",size:20,color:"#FF3B30"}),(0,C.jsx)(P.default,{style:ye.deleteText,children:"Delete"})]})]})]})})]})},pe=["Monday","Tuesday","Wednesday","Thursday","Friday","Saturday","Sunday"],ve=L.default.create({container:{flex:1,backgroundColor:"#121212"},header:{padding:16,borderBottomWidth:1,borderBottomColor:"#333"},headerTitle:{fontSize:24,fontWeight:"bold",color:"#FFFFFF",marginBottom:8},headerSubtitle:{fontSize:16,color:"#BBBBBB"},dayContainer:{padding:16,borderBottomWidth:1,borderBottomColor:"#333"},dayLabel:{fontSize:18,fontWeight:"bold",color:"#FFFFFF",marginBottom:8},programInput:{backgroundColor:"#1E1E1E",borderRadius:8,padding:12,color:"#FFFFFF",borderWidth:1,borderColor:"#333",minHeight:80,textAlignVertical:"top"},saveButton:{flexDirection:"row",alignItems:"center",justifyContent:"center",backgroundColor:"#2196F3",margin:16,padding:16,borderRadius:8},disabledButton:{opacity:.6},saveButtonText:{color:"#FFFFFF",fontSize:16,fontWeight:"bold",marginLeft:8}}),je=({navigation:e,route:t})=>{const{venueId:n,weeklyPrograms:o}=t.params,[r,a]=(0,l.useState)(o||{}),[i,s]=(0,l.useState)(!1);return(0,C.jsxs)(M.default,{style:ve.container,children:[(0,C.jsxs)(z.default,{style:ve.header,children:[(0,C.jsx)(P.default,{style:ve.headerTitle,children:"Manage Weekly Programs"}),(0,C.jsx)(P.default,{style:ve.headerSubtitle,children:"Add or update your venue's weekly schedule"})]}),pe.map((e=>(0,C.jsxs)(z.default,{style:ve.dayContainer,children:[(0,C.jsx)(P.default,{style:ve.dayLabel,children:e}),(0,C.jsx)(A.default,{style:ve.programInput,value:r[e]||"",onChangeText:t=>((e,t)=>{a((n=>Object.assign({},n,{[e]:t})))})(e,t),placeholder:`What's happening on ${e}?`,placeholderTextColor:"#999",multiline:!0})]},e))),(0,C.jsx)(R.default,{style:[ve.saveButton,i&&ve.disabledButton],onPress:async()=>{s(!0);try{await v.updateVenuePrograms(n,r),U.default.alert("Success","Weekly programs updated successfully"),e.goBack()}catch(He){console.error("Error updating programs:",He),U.default.alert("Error","Failed to update weekly programs")}finally{s(!1)}},disabled:i,children:i?(0,C.jsx)(V.default,{color:"#FFFFFF"}):(0,C.jsxs)(C.Fragment,{children:[(0,C.jsx)(k.default,{name:"save-outline",size:20,color:"#FFFFFF"}),(0,C.jsx)(P.default,{style:ve.saveButtonText,children:"Save Programs"})]})})]})},be=L.default.create({container:{flex:1,backgroundColor:"#121212",padding:16},headerText:{fontSize:24,fontWeight:"bold",color:"#FFFFFF",marginBottom:8},subHeaderText:{fontSize:16,color:"#BBBBBB",marginBottom:16},loadingContainer:{flex:1,justifyContent:"center",alignItems:"center",backgroundColor:"#121212"},loadingText:{color:"#FFFFFF",marginTop:16},listContainer:{paddingBottom:16},userCard:{backgroundColor:"#1E1E1E",borderRadius:8,padding:16,marginBottom:16},userInfo:{flexDirection:"row",alignItems:"center",marginBottom:16},avatarContainer:{width:50,height:50,borderRadius:25,backgroundColor:"#2196F3",justifyContent:"center",alignItems:"center",marginRight:16},avatarText:{fontSize:24,fontWeight:"bold",color:"#FFFFFF"},userDetails:{flex:1},userEmail:{fontSize:16,fontWeight:"bold",color:"#FFFFFF",marginBottom:4},userType:{fontSize:14,color:"#2196F3",marginBottom:4},userDate:{fontSize:12,color:"#BBBBBB"},actionButtons:{flexDirection:"row",justifyContent:"flex-end"},actionButton:{flexDirection:"row",alignItems:"center",paddingHorizontal:12,paddingVertical:8,borderRadius:4,marginLeft:8},freezeButton:{backgroundColor:"#2196F3"},unfreezeButton:{backgroundColor:"#333333",borderWidth:1,borderColor:"#2196F3"},deleteButton:{backgroundColor:"#FF3B30"},actionButtonText:{color:"#FFFFFF",marginLeft:4,fontSize:14},emptyContainer:{padding:24,alignItems:"center"},emptyText:{color:"#FFFFFF",fontSize:16}}),we=({navigation:e})=>{const{user:t}=E(),[n,o]=(0,l.useState)([]),[r,a]=(0,l.useState)(!0);(0,l.useEffect)((()=>{if("admin"!==t?.userType)return U.default.alert("Access Denied","You don't have permission to access this page"),void e.goBack();i()}),[t,e]);const i=async()=>{try{a(!0);const e=await v.getAllUsers();o(e)}catch(He){console.error("Error loading users:",He),U.default.alert("Error","Failed to load users")}finally{a(!1)}};return r?(0,C.jsxs)(z.default,{style:be.loadingContainer,children:[(0,C.jsx)(V.default,{size:"large",color:"#2196F3"}),(0,C.jsx)(P.default,{style:be.loadingText,children:"Loading users..."})]}):(0,C.jsxs)(z.default,{style:be.container,children:[(0,C.jsx)(P.default,{style:be.headerText,children:"Manage Users"}),(0,C.jsxs)(P.default,{style:be.subHeaderText,children:["Total Users: ",n.length]}),(0,C.jsx)($.default,{data:n,keyExtractor:e=>e.id,renderItem:({item:e})=>(0,C.jsxs)(z.default,{style:be.userCard,children:[(0,C.jsxs)(z.default,{style:be.userInfo,children:[(0,C.jsx)(z.default,{style:be.avatarContainer,children:(0,C.jsx)(P.default,{style:be.avatarText,children:e.email.charAt(0).toUpperCase()})}),(0,C.jsxs)(z.default,{style:be.userDetails,children:[(0,C.jsx)(P.default,{style:be.userEmail,children:e.email}),(0,C.jsx)(P.default,{style:be.userType,children:"user"===e.userType?"Regular User":"club_owner"===e.userType?"Club Owner":"Admin"}),(0,C.jsxs)(P.default,{style:be.userDate,children:["Joined: ",e.createdAt.toDateString()]})]})]}),(0,C.jsx)(z.default,{style:be.actionButtons,children:"admin"!==e.userType&&(0,C.jsxs)(C.Fragment,{children:[(0,C.jsxs)(R.default,{style:[be.actionButton,e.isFrozen?be.unfreezeButton:be.freezeButton],onPress:()=>(async(e,t)=>{try{await v.freezeUser(e,t),U.default.alert("Success",`User ${t?"frozen":"unfrozen"} successfully`),i()}catch(He){console.error("Error freezing/unfreezing user:",He),U.default.alert("Error",`Failed to ${t?"freeze":"unfreeze"} user`)}})(e.id,!e.isFrozen),children:[(0,C.jsx)(k.default,{name:e.isFrozen?"snow-outline":"snow",size:20,color:e.isFrozen?"#2196F3":"#FFFFFF"}),(0,C.jsx)(P.default,{style:be.actionButtonText,children:e.isFrozen?"Unfreeze":"Freeze"})]}),(0,C.jsxs)(R.default,{style:[be.actionButton,be.deleteButton],onPress:()=>{return t=e.id,void U.default.alert("Delete User","Are you sure you want to delete this user? This action cannot be undone.",[{text:"Cancel",style:"cancel"},{text:"Delete",style:"destructive",onPress:async()=>{try{a(!0),await v.deleteUser(t),U.default.alert("Success","User deleted successfully"),i()}catch(He){console.error("Error deleting user:",He),U.default.alert("Error","Failed to delete user"),a(!1)}}}]);var t},children:[(0,C.jsx)(k.default,{name:"trash-outline",size:20,color:"#FFFFFF"}),(0,C.jsx)(P.default,{style:be.actionButtonText,children:"Delete"})]})]})})]}),contentContainerStyle:be.listContainer,ListEmptyComponent:(0,C.jsx)(z.default,{style:be.emptyContainer,children:(0,C.jsx)(P.default,{style:be.emptyText,children:"No users found"})})})]})},Ce=L.default.create({container:{flex:1,backgroundColor:"#121212",padding:16},headerText:{fontSize:24,fontWeight:"bold",color:"#FFFFFF",marginBottom:8},subHeaderText:{fontSize:16,color:"#BBBBBB",marginBottom:16},loadingContainer:{flex:1,justifyContent:"center",alignItems:"center",backgroundColor:"#121212"},loadingText:{color:"#FFFFFF",marginTop:16},listContainer:{paddingBottom:16},venueCard:{backgroundColor:"#1E1E1E",borderRadius:8,overflow:"hidden",marginBottom:16},venueImage:{width:"100%",height:120},venueContent:{padding:16},venueName:{fontSize:18,fontWeight:"bold",color:"#FFFFFF",marginBottom:4},venueLocation:{fontSize:14,color:"#BBBBBB",marginBottom:4},venueCategories:{fontSize:14,color:"#2196F3",marginBottom:16},actionButtons:{flexDirection:"row",justifyContent:"flex-end"},actionButton:{flexDirection:"row",alignItems:"center",paddingHorizontal:12,paddingVertical:8,borderRadius:4,marginLeft:8},viewButton:{backgroundColor:"#2196F3"},deleteButton:{backgroundColor:"#FF3B30"},actionButtonText:{color:"#FFFFFF",marginLeft:4,fontSize:14},emptyContainer:{padding:24,alignItems:"center"},emptyText:{color:"#FFFFFF",fontSize:16}}),Be=({navigation:e})=>{const{user:t}=E(),[n,o]=(0,l.useState)([]),[r,a]=(0,l.useState)(!0);(0,l.useEffect)((()=>{if("admin"!==t?.userType)return U.default.alert("Access Denied","You don't have permission to access this page"),void e.goBack();i()}),[t,e]);const i=async()=>{try{a(!0);const e=await v.getVenues();o(e)}catch(He){console.error("Error loading venues:",He),U.default.alert("Error","Failed to load venues")}finally{a(!1)}};return r?(0,C.jsxs)(z.default,{style:Ce.loadingContainer,children:[(0,C.jsx)(V.default,{size:"large",color:"#2196F3"}),(0,C.jsx)(P.default,{style:Ce.loadingText,children:"Loading venues..."})]}):(0,C.jsxs)(z.default,{style:Ce.container,children:[(0,C.jsx)(P.default,{style:Ce.headerText,children:"Manage Venues"}),(0,C.jsxs)(P.default,{style:Ce.subHeaderText,children:["Total Venues: ",n.length]}),(0,C.jsx)($.default,{data:n,keyExtractor:e=>e.id,renderItem:({item:t})=>(0,C.jsxs)(z.default,{style:Ce.venueCard,children:[(0,C.jsx)(G.default,{source:{uri:t.backgroundImageUrl},style:Ce.venueImage}),(0,C.jsxs)(z.default,{style:Ce.venueContent,children:[(0,C.jsx)(P.default,{style:Ce.venueName,children:t.name}),(0,C.jsx)(P.default,{style:Ce.venueLocation,children:t.location}),(0,C.jsx)(P.default,{style:Ce.venueCategories,children:t.categories.join(", ")}),(0,C.jsxs)(z.default,{style:Ce.actionButtons,children:[(0,C.jsxs)(R.default,{style:[Ce.actionButton,Ce.viewButton],onPress:()=>{return n=t.id,void e.navigate("VenueDetail",{venueId:n});var n},children:[(0,C.jsx)(k.default,{name:"eye-outline",size:20,color:"#FFFFFF"}),(0,C.jsx)(P.default,{style:Ce.actionButtonText,children:"View"})]}),(0,C.jsxs)(R.default,{style:[Ce.actionButton,Ce.deleteButton],onPress:()=>{return e=t.id,void U.default.alert("Delete Venue","Are you sure you want to delete this venue? This action cannot be undone.",[{text:"Cancel",style:"cancel"},{text:"Delete",style:"destructive",onPress:async()=>{try{a(!0),await v.deleteVenue(e),await v.deleteEventsByVenue(e),U.default.alert("Success","Venue and associated events deleted successfully"),i()}catch(He){console.error("Error deleting venue:",He),U.default.alert("Error","Failed to delete venue"),a(!1)}}}]);var e},children:[(0,C.jsx)(k.default,{name:"trash-outline",size:20,color:"#FFFFFF"}),(0,C.jsx)(P.default,{style:Ce.actionButtonText,children:"Delete"})]})]})]})]}),contentContainerStyle:Ce.listContainer,ListEmptyComponent:(0,C.jsx)(z.default,{style:Ce.emptyContainer,children:(0,C.jsx)(P.default,{style:Ce.emptyText,children:"No venues found"})})})]})},Se=L.default.create({container:{flex:1,backgroundColor:"#121212",padding:16},headerText:{fontSize:24,fontWeight:"bold",color:"#FFFFFF",marginBottom:8},subHeaderText:{fontSize:16,color:"#BBBBBB",marginBottom:16},loadingContainer:{flex:1,justifyContent:"center",alignItems:"center",backgroundColor:"#121212"},loadingText:{color:"#FFFFFF",marginTop:16},listContainer:{paddingBottom:16},eventCard:{backgroundColor:"#1E1E1E",borderRadius:8,overflow:"hidden",marginBottom:16},eventImage:{width:"100%",height:120},eventContent:{padding:16},eventName:{fontSize:18,fontWeight:"bold",color:"#FFFFFF",marginBottom:4},eventVenue:{fontSize:14,color:"#2196F3",marginBottom:4},eventDate:{fontSize:14,color:"#BBBBBB",marginBottom:16},featuredBadge:{position:"absolute",top:16,right:16,backgroundColor:"#FFD700",paddingHorizontal:8,paddingVertical:4,borderRadius:4},featuredText:{color:"#000000",fontWeight:"bold",fontSize:12},actionButtons:{flexDirection:"row",justifyContent:"flex-end",flexWrap:"wrap"},actionButton:{flexDirection:"row",alignItems:"center",paddingHorizontal:12,paddingVertical:8,borderRadius:4,marginLeft:8,marginBottom:8},viewButton:{backgroundColor:"#2196F3"},featuredButton:{backgroundColor:"#FFD700"},unfeaturedButton:{backgroundColor:"#333333"},deleteButton:{backgroundColor:"#FF3B30"},actionButtonText:{color:"#FFFFFF",marginLeft:4,fontSize:14},emptyContainer:{padding:24,alignItems:"center"},emptyText:{color:"#FFFFFF",fontSize:16}}),Te=({navigation:e})=>{const{user:t}=E(),[n,o]=(0,l.useState)([]),[r,a]=(0,l.useState)(!0);(0,l.useEffect)((()=>{if("admin"!==t?.userType)return U.default.alert("Access Denied","You don't have permission to access this page"),void e.goBack();i()}),[t,e]);const i=async()=>{try{a(!0);const e=await v.getEvents();o(e)}catch(He){console.error("Error loading events:",He),U.default.alert("Error","Failed to load events")}finally{a(!1)}};return r?(0,C.jsxs)(z.default,{style:Se.loadingContainer,children:[(0,C.jsx)(V.default,{size:"large",color:"#2196F3"}),(0,C.jsx)(P.default,{style:Se.loadingText,children:"Loading events..."})]}):(0,C.jsxs)(z.default,{style:Se.container,children:[(0,C.jsx)(P.default,{style:Se.headerText,children:"Manage Events"}),(0,C.jsxs)(P.default,{style:Se.subHeaderText,children:["Total Events: ",n.length]}),(0,C.jsx)($.default,{data:n,keyExtractor:e=>e.id,renderItem:({item:t})=>(0,C.jsxs)(z.default,{style:Se.eventCard,children:[(0,C.jsx)(G.default,{source:{uri:t.posterImageUrl},style:Se.eventImage}),(0,C.jsxs)(z.default,{style:Se.eventContent,children:[(0,C.jsx)(P.default,{style:Se.eventName,children:t.name}),(0,C.jsx)(P.default,{style:Se.eventVenue,children:t.venueName}),(0,C.jsx)(P.default,{style:Se.eventDate,children:t.date.toDateString()}),t.isFeatured&&(0,C.jsx)(z.default,{style:Se.featuredBadge,children:(0,C.jsx)(P.default,{style:Se.featuredText,children:"Featured"})}),(0,C.jsxs)(z.default,{style:Se.actionButtons,children:[(0,C.jsxs)(R.default,{style:[Se.actionButton,Se.viewButton],onPress:()=>{return n=t.id,void e.navigate("EventDetail",{eventId:n});var n},children:[(0,C.jsx)(k.default,{name:"eye-outline",size:20,color:"#FFFFFF"}),(0,C.jsx)(P.default,{style:Se.actionButtonText,children:"View"})]}),(0,C.jsxs)(R.default,{style:[Se.actionButton,t.isFeatured?Se.unfeaturedButton:Se.featuredButton],onPress:()=>(async(e,t)=>{try{await v.updateEvent(e,{isFeatured:!t}),U.default.alert("Success",`Event ${t?"unfeatured":"featured"} successfully`),i()}catch(He){console.error("Error updating event:",He),U.default.alert("Error","Failed to update event")}})(t.id,t.isFeatured),children:[(0,C.jsx)(k.default,{name:t.isFeatured?"star-outline":"star",size:20,color:"#FFFFFF"}),(0,C.jsx)(P.default,{style:Se.actionButtonText,children:t.isFeatured?"Unfeature":"Feature"})]}),(0,C.jsxs)(R.default,{style:[Se.actionButton,Se.deleteButton],onPress:()=>{return e=t.id,void U.default.alert("Delete Event","Are you sure you want to delete this event? This action cannot be undone.",[{text:"Cancel",style:"cancel"},{text:"Delete",style:"destructive",onPress:async()=>{try{a(!0),await v.deleteEvent(e),U.default.alert("Success","Event deleted successfully"),i()}catch(He){console.error("Error deleting event:",He),U.default.alert("Error","Failed to delete event"),a(!1)}}}]);var e},children:[(0,C.jsx)(k.default,{name:"trash-outline",size:20,color:"#FFFFFF"}),(0,C.jsx)(P.default,{style:Se.actionButtonText,children:"Delete"})]})]})]})]}),contentContainerStyle:Se.listContainer,ListEmptyComponent:(0,C.jsx)(z.default,{style:Se.emptyContainer,children:(0,C.jsx)(P.default,{style:Se.emptyText,children:"No events found"})})})]})},Ee=(0,I.default)(),Ie=(0,D.default)(),De=(0,I.default)(),ke=(0,I.default)(),ze=(0,I.default)(),Pe=(0,I.default)(),Ae=(0,I.default)(),Re=()=>(0,C.jsxs)(Ee.Navigator,{screenOptions:{headerStyle:{backgroundColor:"#121212"},headerTintColor:"#FFFFFF",headerTitleStyle:{fontWeight:"bold"},gestureEnabled:!1},children:[(0,C.jsx)(Ee.Screen,{name:"Login",component:O,options:{headerShown:!1}}),(0,C.jsx)(Ee.Screen,{name:"SignUp",component:q,options:{headerShown:!1}})]}),Le=()=>(0,C.jsxs)(De.Navigator,{screenOptions:{headerStyle:{backgroundColor:"#121212"},headerTintColor:"#FFFFFF",headerTitleStyle:{fontWeight:"bold"}},children:[(0,C.jsx)(De.Screen,{name:"VenuesList",component:J,options:{title:"Venues"}}),(0,C.jsx)(De.Screen,{name:"VenueDetail",component:X,options:{title:"Venue Details"}}),(0,C.jsx)(De.Screen,{name:"AddEvent",component:Fe,options:{title:"Add Event"}}),(0,C.jsx)(De.Screen,{name:"EventDetail",component:te,options:{title:"Event Details"}}),(0,C.jsx)(De.Screen,{name:"ManagePrograms",component:je,options:{title:"Weekly Programs"}})]}),Ue=()=>(0,C.jsxs)(ke.Navigator,{screenOptions:{headerStyle:{backgroundColor:"#121212"},headerTintColor:"#FFFFFF",headerTitleStyle:{fontWeight:"bold"}},children:[(0,C.jsx)(ke.Screen,{name:"EventsList",component:Q,options:{title:"Events"}}),(0,C.jsx)(ke.Screen,{name:"EventDetail",component:te,options:{title:"Event Details"}}),(0,C.jsx)(ke.Screen,{name:"AddEvent",component:Fe,options:{title:"Add Event"}}),(0,C.jsx)(ke.Screen,{name:"VenueDetail",component:X,options:{title:"Venue Details"}})]}),Ve=()=>(0,C.jsxs)(ze.Navigator,{screenOptions:{headerStyle:{backgroundColor:"#121212"},headerTintColor:"#FFFFFF",headerTitleStyle:{fontWeight:"bold"}},children:[(0,C.jsx)(ze.Screen,{name:"MapView",component:re,options:{title:"Map"}}),(0,C.jsx)(ze.Screen,{name:"VenueDetail",component:X,options:{title:"Venue Details"}}),(0,C.jsx)(ze.Screen,{name:"EventDetail",component:te,options:{title:"Event Details"}})]}),Ne=()=>(0,C.jsxs)(Pe.Navigator,{screenOptions:{headerStyle:{backgroundColor:"#121212"},headerTintColor:"#FFFFFF",headerTitleStyle:{fontWeight:"bold"}},children:[(0,C.jsx)(Pe.Screen,{name:"CalendarView",component:ie,options:{title:"Calendar"}}),(0,C.jsx)(Pe.Screen,{name:"EventDetail",component:te,options:{title:"Event Details"}}),(0,C.jsx)(Pe.Screen,{name:"VenueDetail",component:X,options:{title:"Venue Details"}})]}),We=()=>(0,C.jsxs)(Ae.Navigator,{screenOptions:{headerStyle:{backgroundColor:"#121212"},headerTintColor:"#FFFFFF",headerTitleStyle:{fontWeight:"bold"}},children:[(0,C.jsx)(Ae.Screen,{name:"ProfileMain",component:ue,options:{title:"Profile"}}),(0,C.jsx)(Ae.Screen,{name:"MyVenues",component:xe,options:{title:"My Venues"}}),(0,C.jsx)(Ae.Screen,{name:"AddVenue",component:me,options:{title:"Add Venue"}}),(0,C.jsx)(Ae.Screen,{name:"VenueDetail",component:X,options:{title:"Venue Details"}}),(0,C.jsx)(Ae.Screen,{name:"EventDetail",component:te,options:{title:"Event Details"}}),(0,C.jsx)(Ae.Screen,{name:"AdminUsers",component:we,options:{title:"Manage Users"}}),(0,C.jsx)(Ae.Screen,{name:"AdminVenues",component:Be,options:{title:"Manage Venues"}}),(0,C.jsx)(Ae.Screen,{name:"AdminEvents",component:Te,options:{title:"Manage Events"}})]}),Oe=()=>(0,C.jsxs)(Ie.Navigator,{screenOptions:({route:e})=>({tabBarIcon:({focused:t,color:n,size:o})=>{let r="";return"Venues"===e.name?r=t?"business":"business-outline":"Events"===e.name?r=t?"calendar":"calendar-outline":"Map"===e.name?r=t?"map":"map-outline":"Calendar"===e.name?r=t?"today":"today-outline":"Profile"===e.name&&(r=t?"person":"person-outline"),(0,C.jsx)(k.default,{name:r,size:o,color:n})},tabBarActiveTintColor:"#2196F3",tabBarInactiveTintColor:"gray",tabBarStyle:{backgroundColor:"#121212",borderTopColor:"#333"},headerStyle:{backgroundColor:"#121212"},headerTintColor:"#FFFFFF",headerTitleStyle:{fontWeight:"bold"}}),children:[(0,C.jsx)(Ie.Screen,{name:"Venues",component:Le,options:{headerShown:!1}}),(0,C.jsx)(Ie.Screen,{name:"Events",component:Ue,options:{headerShown:!1}}),(0,C.jsx)(Ie.Screen,{name:"Map",component:Ve,options:{headerShown:!1}}),(0,C.jsx)(Ie.Screen,{name:"Calendar",component:Ne,options:{headerShown:!1}}),(0,C.jsx)(Ie.Screen,{name:"Profile",component:We,options:{headerShown:!1}})]}),Me=(0,a.default)();(0,o.default)((function(){return(0,C.jsx)(T,{children:(0,C.jsx)(r.default,{children:(0,C.jsxs)(Me.Navigator,{screenOptions:{headerShown:!1},children:[(0,C.jsx)(Me.Screen,{name:"Auth",component:Re}),(0,C.jsx)(Me.Screen,{name:"Main",component:Oe})]})})})}))}},t={};function n(o){var r=t[o];if(void 0!==r)return r.exports;var a=t[o]={id:o,loaded:!1,exports:{}};return e[o].call(a.exports,a,a.exports,n),a.loaded=!0,a.exports}n.m=e,(()=>{var e=[];n.O=(t,o,r,a)=>{if(!o){var l=1/0;for(c=0;c<e.length;c++){for(var[o,r,a]=e[c],i=!0,s=0;s<o.length;s++)(!1&a||l>=a)&&Object.keys(n.O).every((e=>n.O[e](o[s])))?o.splice(s--,1):(i=!1,a<l&&(l=a));if(i){e.splice(c--,1);var d=r();void 0!==d&&(t=d)}}return t}a=a||0;for(var c=e.length;c>0&&e[c-1][2]>a;c--)e[c]=e[c-1];e[c]=[o,r,a]}})(),n.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return n.d(t,{a:t}),t},n.d=(e,t)=>{for(var o in t)n.o(t,o)&&!n.o(e,o)&&Object.defineProperty(e,o,{enumerable:!0,get:t[o]})},n.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}(),n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),n.r=e=>{"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.nmd=e=>(e.paths=[],e.children||(e.children=[]),e),n.p="/",(()=>{var e={792:0};n.O.j=t=>0===e[t];var t=(t,o)=>{var r,a,[l,i,s]=o,d=0;if(l.some((t=>0!==e[t]))){for(r in i)n.o(i,r)&&(n.m[r]=i[r]);if(s)var c=s(n)}for(t&&t(o);d<l.length;d++)a=l[d],n.o(e,a)&&e[a]&&e[a][0](),e[a]=0;return n.O(c)},o=self.webpackChunkweb=self.webpackChunkweb||[];o.forEach(t.bind(null,0)),o.push=t.bind(null,o.push.bind(o))})();var o=n.O(void 0,[644],(()=>n(66873)));o=n.O(o)})();
//# sourceMappingURL=main.9b665ceb.js.map